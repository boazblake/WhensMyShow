{"version":3,"sources":["app/App.js","app/Http.js","app/Init.js","app/Layout.js","app/Models.js","app/Routes.js","app/components/Calendar.js","app/components/Elements.js","app/components/Schedule.js","app/pages/Details-Page.js","app/pages/Home-Page.js","app/pages/Home-ToolBar.js","app/pages/Search-Input.js","app/pages/Search-Page.js","app/pages/Search-Results.js","app/pages/fns.js","app/secrets.js","app/utils/animations.js","app/utils/helpers.js","app/utils/index.js"],"names":["toRoutes","mdl","acc","route","onmatch","args","path","fullroute","group","includes","state","isAuth","set","m","get","anchor","split","isAnchor","Boolean","render","component","App","Routes","reduce","onProgress","e","lengthComputable","Model","loadingProgress","max","total","value","loaded","redraw","onLoad","onLoadStart","isLoading","onLoadEnd","xhrProgress","config","xhr","onprogress","onload","onloadstart","onloadend","_http","request","headers","url","contentType","method","_task","Task","rej","res","then","getTask","postTask","putTask","console","log","deleteTask","backEndlessBaseUrl","tvMazeSearchUrl","baseUrl","query","tvMazeShowByIdUrl","id","backendlessUrl","searchUrl","tvMazeBaseUrl","tvMazeDetailsUrl","http","navigator","document","addEventListener","root","body","NavBar","attrs","isActive","view","filter","map","idx","key","class","href","name","showSearchBar","SearchInput","showHomeBar","HomeToolBar","Header","ProgressBar","Loader","Main","children","Layout","paginate","page","total_pages","total_results","searchItem","showMenu","details","selected","currentList","data","shows","errors","search","user","lists","isNav","scrollToAnchor","Home","Search","Details","months","daysOfWeek","calendarHeader","d","calendarBody","Calendar","month","State","today","getMonth","year","getFullYear","day","getDay","daysInMonth","large","onclick","Paginator","paginateFn","viewModel","totalPages","length","firstThree","lastThree","p","Number","child","ListSelector","list","action","active","Button","classList","label","Input","type","placeholder","for","onchange","CheckBox","checked","DropDown","tabindex","MenuItem","Menu","Schedule","updateShow","update","fork","Episode","epsData","undefined","getEpisode","episode","s","oninit","eps","src","image","TextBlock","text","airdate","season","number","ListSelection","showOpts","listStatus","deleteShow","show","objectId","updatedShows","getId","param","getShowDetails","DetailCard","network","webChannel","status","genre","notes","oninput","target","links","response","status_message","onbeforeremove","NoShows","getShowsTask","selectedShows","toDetailsPage","FilterLists","selectList","searchShows","SearchResults","onSuccess","updateUserShows","result","addUserShows","Result","tvmazeId","v","formatError","error","JSON","parse","stringify","formatLinks","prev","next","urls","toEpisodeViewModel","_links","makeHttps","original","medium","toDetailsViewModel","genres","premiered","summary","toSearchViewModel","toDbModel","onError","rejectWithAttr","attr","updateResults","updateShowStatus","r","getShows","searchShowsTask","itemSelected","propIsDefined","not","showListSelection","updateListStatus","listType","createBody","dto","toDto","addUserShowsTask","chain","_","updateUserShowsTask","deleteShowTask","updateShowDetailsTask","getShowDetailsTask","findShowInDbTask","filterShowsByListType","getEpisodeTask","episodeUrl","tmdbApiKey","tmdbAuth","Authorization","tmdbBaseUrl","tvMazeApiKey","IsLoading","animateComponentEntrance","dom","style","opacity","setTimeout","toggle","animateSidebarEntrance","animateChildrenEntrance","animateChildrenLimitsEntrance","animate","dir","slideModalOut","Promise","remove","add","animateChildrenLimitsExit","reverse","display","infiniteScroll","setpoint","scrollPos","scrollTop","addTerms","item","terms","values","byTerms","RegExp","_search","_sort","toLower","toString","_direction","identity","_paginate","offset","limit","filterTask","prop","direction","of","debounce","wait","now","fn","timeout","context","arguments","later","apply","callNow","clearTimeout","is","el","targetEl","getElementById","window","pageYOffset","documentElement","getBoundingClientRect","top","scroll","left","behavior","jsonCopy"],"mappings":"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","file":"docs/app.js","sourcesContent":["const toRoutes = (mdl) => (acc, route) => {\n  acc[route.route] = {\n    onmatch: (args, path, fullroute) => {\n      if (route.group.includes(\"authenticated\") && !mdl.state.isAuth()) {\n        mdl.route.set(m.route.get())\n      }\n      mdl.state.route = route\n      mdl.state.anchor = path.split(\"#\")[1]\n      let isAnchor = Boolean(mdl.state.anchor)\n      route.onmatch(mdl, args, path, fullroute, isAnchor)\n    },\n    render: () => route.component(mdl)\n  }\n  return acc\n}\n\nconst App = (mdl) => mdl.Routes.reduce(toRoutes(mdl), {})\n\nexport default App\n","import { tvMazeApiKey, tvMazeBaseUrl } from \"./secrets.js\"\nimport Task from \"data.task\"\nimport Model from \"./Models.js\"\n\nfunction onProgress(e) {\n  if (e.lengthComputable) {\n    // console.log(\"onprogress\", e.total, e.loaded)\n    Model.state.loadingProgress.max(e.total)\n    Model.state.loadingProgress.value(e.loaded)\n    m.redraw()\n  }\n}\n\nfunction onLoad() {\n  return false\n}\n\nfunction onLoadStart() {\n  Model.state.isLoading(true)\n  return false\n}\nfunction onLoadEnd() {\n  Model.state.isLoading(false)\n  Model.state.loadingProgress.max(0)\n  Model.state.loadingProgress.value(0)\n  return false\n}\n\nconst xhrProgress = {\n  config: (xhr) => {\n    // console.log(xhr)\n    xhr.onprogress = onProgress\n    xhr.onload = onLoad\n    xhr.onloadstart = onLoadStart\n    xhr.onloadend = onLoadEnd\n  }\n}\n\nconst _http = (mdl) => {\n  mdl.state.isLoading(!mdl.state.isLoading)\n  return m.request\n}\n\nconst headers = (url, args) => {\n  // let tmdbBearerToken = url.includes(\"themoviedb\") && tmdbAuth\n  let contentType =\n    { \"Content-Type\": \"application/json;charset=utf-8\" } &&\n    [\"Get\", \"POST\", \"PUT\", \"PATCH\"].includes(args.method)\n  return {\n    headers: {\n      // ...tmdbBearerToken,\n      ...contentType\n    }\n  }\n}\n\nconst _task = (url) => (args) =>\n  new Task((rej, res) =>\n    _http(Model)(url, { ...args, ...headers(url, args), ...xhrProgress }).then(\n      res,\n      rej\n    )\n  )\n\nconst getTask = (url, args = {}) =>\n  _task(url)({\n    ...args,\n    method: \"GET\"\n  })\nconst postTask = (url, args = {}) =>\n  _task(url)({\n    ...args,\n    method: \"POST\"\n  })\nconst putTask = (url, args = {}) => {\n  console.log(args)\n  return _task(url)({\n    ...args,\n    method: \"PUT\"\n  })\n}\nconst deleteTask = (url, args = {}) =>\n  _task(url)({\n    ...args,\n    method: \"DELETE\"\n  })\n\nconst backEndlessBaseUrl =\n  \"https://api.backendless.com/7F421158-889B-FD93-FF62-1ACDCD07AD00/1D9BEF3E-0CCC-D6C6-FF60-1A0B849A3E00/data/\"\n\nconst tvMazeSearchUrl = (baseUrl) => (query) =>\n  `${baseUrl}/search/shows?q=${query}`\n\nconst tvMazeShowByIdUrl = (baseUrl) => (id) => `${baseUrl}/shows/${id}`\n\nconst backendlessUrl = (url) => backEndlessBaseUrl + url\n\nconst searchUrl = (query) => tvMazeSearchUrl(tvMazeBaseUrl)(query)\nconst tvMazeDetailsUrl = (id) => tvMazeShowByIdUrl(tvMazeBaseUrl)(id)\n\nconst http = {\n  getTask,\n  postTask,\n  putTask,\n  deleteTask,\n  searchUrl,\n  tvMazeDetailsUrl,\n  backendlessUrl\n}\n\nexport default http\n","import m from \"mithril\"\nimport Model from \"./Models.js\"\nimport App from \"./App.js\"\n\nif (\"serviceWorker\" in navigator) {\n  //add cache!\n  // navigator.serviceWorker.register(\"sw.js\")\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const root = document.body\n  m.route(root, \"/home\", App(Model))\n})\n","import m from \"mithril\"\nimport { propEq } from \"ramda\"\nimport SearchInput from \"./pages/Search-Input.js\"\nimport HomeToolBar from \"./pages/Home-ToolBar.js\"\nimport { ProgressBar, Loader } from \"./components/Elements.js\"\n\nconst NavBar = ({ attrs: { mdl } }) => {\n  const isActive = (route) => route.route == m.route.get()\n\n  return {\n    view: ({ attrs: { mdl } }) => {\n      return m(\n        \"nav\",\n        m(\n          \"ul.tab tab-block\",\n          mdl.Routes.filter(propEq(\"isNav\", true)).map((route, idx) =>\n            m(\n              \"li.tab-item\",\n              { key: idx, class: isActive(route) && \"active\" },\n              m(\n                \"li\",\n                { class: \"tab-item\" },\n                m(\"a\", { href: `#!${route.route}` }, route.name)\n              )\n            )\n          )\n        )\n      )\n    }\n  }\n}\n\nconst showSearchBar = (mdl) =>\n  m.route.get() === \"/search\" && m(SearchInput, { mdl })\n\nconst showHomeBar = (mdl) =>\n  m.route.get() === \"/home\" && m(HomeToolBar, { mdl })\n\nconst Header = () => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\".header\", [\n        mdl.state.isLoading() && m(ProgressBar, { mdl }),\n        // m(\"h1.h1\", mdl.state.route.name),\n        m(NavBar, { mdl }),\n        mdl.state.isLoading() && m(Loader),\n        showHomeBar(mdl),\n        showSearchBar(mdl)\n      ])\n  }\n}\n\nconst Main = () => {\n  return { view: ({ children }) => m(\"section.main\", children) }\n}\n\nconst Layout = () => {\n  return {\n    view: ({ children, attrs: { mdl } }) =>\n      m(\".app\", [m(Header, { mdl }), m(Main, { mdl }, children)])\n  }\n}\n\nexport default Layout\n","import Stream from \"mithril-stream\"\nimport Routes from \"./Routes.js\"\n\nconst state = {\n  paginate: {\n    page: Stream(1),\n    total_pages: Stream(0),\n    total_results: Stream(0)\n  },\n  query: Stream(\"\"),\n  isLoading: Stream(false),\n  loadingProgress: {\n    max: Stream(null),\n    value: Stream(null)\n  },\n  searchItem: {\n    showMenu: Stream(false)\n  },\n  details: {\n    selected: Stream(null)\n  },\n  currentList: Stream(\"Watching\")\n}\n\nconst data = {\n  shows: Stream([]),\n  details: Stream(null)\n}\n\nconst errors = {\n  details: Stream(null),\n  search: Stream(null),\n  user: Stream(null)\n}\n\nconst user = {\n  shows: Stream([]),\n  lists: Stream([\"Watching\", \"Wishlist\"])\n}\n\nconst Model = {\n  Routes,\n  state,\n  user,\n  data,\n  errors\n}\n\nexport default Model\n","import m from \"mithril\"\nimport Layout from \"./Layout.js\"\nimport Home from \"./pages/Home-Page.js\"\nimport Search from \"./pages/Search-Page.js\"\nimport Details from \"./pages/Details-Page.js\"\nimport { flatten } from \"ramda\"\n\nconst Main = [\n  {\n    id: \"home\",\n    name: \"Home\",\n    // icon: Icons.home,\n    route: \"/home\",\n    isNav: true,\n    group: [],\n    children: [],\n    onmatch: (mdl, args, path, fullroute, isAnchor) => {\n      isAnchor && scrollToAnchor(mdl.state.anchor)\n    },\n    component: (mdl) => m(Layout, { mdl }, m(Home, { mdl }))\n  },\n  {\n    id: \"search\",\n    name: \"Search\",\n    // icon: Icons.search,\n    route: \"/search\",\n    isNav: true,\n    group: [],\n    children: [],\n    onmatch: (mdl, args, path, fullroute, isAnchor) => {\n      isAnchor && scrollToAnchor(mdl.state.anchor)\n    },\n    component: (mdl) => m(Layout, { mdl }, m(Search, { mdl }))\n  },\n  {\n    id: \"details\",\n    name: \"Details\",\n    // icon: Icons.search,\n    route: \"/details/:id\",\n    isNav: false,\n    group: [],\n    children: [],\n    onmatch: (mdl, args, path, fullroute, isAnchor) => {\n      isAnchor && scrollToAnchor(mdl.state.anchor)\n    },\n    component: (mdl) => m(Layout, { mdl }, m(Details, { mdl }))\n  }\n]\n\nconst Routes = flatten([Main])\nexport default Routes\n","import m from \"mithril\"\nimport { Button } from \"./Elements\"\nimport Stream from \"mithril-stream\"\nimport { getDaysInMonth } from \"date-fns\"\n\nconst months = [\n  \"January\",\n  \"Febuary\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\"\n]\n\nconst daysOfWeek = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\n\nconst calendarHeader = () => {\n  return {\n    view: () =>\n      m(\"div.calendar-header\", daysOfWeek.map((d) => m(\"div.calendar-date\", d)))\n  }\n}\n\nconst calendarBody = () => {\n  return {\n    view: () =>\n      m(\"div.calendar-body\", [\n        m(\"div.calendar-date.prev-month\", m(\"button.date-item\", \"26\")),\n        m(\"div.calendar-date.prev-month\", m(\"button.date-item\", \"27\")),\n        m(\"div.calendar-date.prev-month\", m(\"button.date-item\", \"28\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"1\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"2\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"3\")),\n        m(\n          \".calendar-date.tooltip[data-tooltip='Today']\",\n          m(\"button.date-item.date-today\", \"4\")\n        ),\n        m(\n          \".calendar-date.tooltip[data-tooltip='Not available']\",\n          m(\"button.date-item[disabled]\", \"5\")\n        ),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"6\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"7\")),\n        m(\n          \".calendar-date.tooltip[data-tooltip='You have appointments']\",\n          m(\"button.date-item.badge\", \"8\")\n        ),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"9\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"10\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"11\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"12\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"13\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"14\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"15\")),\n        m(\n          \"div.calendar-date.calendar-range.range-start\",\n          m(\"button.date-item\", \"16\")\n        ),\n        m(\"div.calendar-date.calendar-range\", m(\"button.date-item\", \"17\")),\n        m(\"div.calendar-date.calendar-range\", m(\"button.date-item\", \"18\")),\n        m(\"div.calendar-date.calendar-range\", m(\"button.date-item\", \"19\")),\n        m(\n          \"div.calendar-date.calendar-range.range-end\",\n          m(\"button.date-item\", \"20\")\n        ),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"21\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"22\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"23\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"24\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"25\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"26\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"27\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"28\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"29\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"30\")),\n        m(\"div.calendar-date\", m(\"button.date-item\", \"31\")),\n        m(\"div.calendar-date.next-month\", m(\"button.date-item\", \"1\"))\n      ])\n  }\n}\n\nconst Calendar = ({ attrs: { mdl } }) => {\n  let month = mdl.State.today.getMonth()\n  let year = mdl.State.today.getFullYear()\n  let day = mdl.State.today.getDay()\n\n  const state = {\n    months,\n    daysOfWeek,\n    day,\n    month,\n    year,\n    daysInMonth: getDaysInMonth(month)\n  }\n\n  console.log(\"month\", state)\n\n  return {\n    view: ({ attrs: { mdl, large } }) =>\n      m(\"div.calendar\", { class: large && \"calendar-lg\" }, [\n        m(\"div.calendar-nav.navbar\", [\n          m(\n            \"button.btn.btn-action.btn-link.btn-lg\",\n            {\n              onclick: (e) => state.month--\n            },\n            m(\"i.icon.icon-arrow-left\")\n          ),\n          m(\"div.navbar-primary\", [\n            `${state.months[state.month]} ${state.year}`\n          ]),\n          m(\n            \"button.btn.btn-action.btn-link.btn-lg\",\n            { onclick: state.month++ },\n            m(\"i.icon.icon-arrow-right\")\n          )\n        ]),\n        m(\"div.calendar-container\", [\n          m(calendarHeader, { mdl }),\n          m(calendarBody, { mdl })\n        ])\n      ])\n  }\n}\n\nexport default Calendar\n","import m from \"mithril\"\nimport { range, take, takeLast, flatten } from \"ramda\"\n\nexport const Loader = () => {\n  return {\n    view: () => m(\".loader\", [m(\".\"), m(\".\")])\n  }\n}\n\nexport const Paginator = () => {\n  return {\n    view: ({ attrs: { mdl, paginateFn } }) => {\n      let { page, total_pages, total_results } = mdl.state.paginate\n      if (total_results()) {\n        let viewModel,\n          totalPages = range(1, total_pages() + 1)\n\n        if (totalPages.length > 6) {\n          let firstThree = take(3, totalPages)\n          let lastThree = takeLast(3, totalPages)\n          viewModel = flatten([firstThree, m(\"span\", \"...\"), lastThree])\n        } else {\n          viewModel = totalPages\n        }\n\n        return m(\"ul.pagination.navbar\", [\n          m(\n            \"li.page-item\",\n            {\n              class: page() == 1 ? \"disabled\" : \"c-hand\",\n              onclick: () => {\n                if (page() !== 1 && page(page() - 1)) {\n                  paginateFn(mdl)\n                }\n              }\n            },\n            m(\"a[tabindex='-1']\", \"Previous\")\n          ),\n          viewModel.map((p) =>\n            m(\n              \"li.page-item.c-hand\",\n              {\n                class: page() == p && \"active c-auto\",\n                onclick: () => {\n                  if (Number(p) && p !== page()) {\n                    page(p)\n                    paginateFn(mdl)\n                  }\n                }\n              },\n              m(\"a\", p)\n            )\n          ),\n          m(\n            \"li.page-item\",\n            {\n              class: page() == total_pages() ? \"disabled\" : \"c-hand\",\n              onclick: () => {\n                if (page() < total_pages() && page(page() + 1)) {\n                  paginateFn(mdl)\n                }\n              }\n            },\n            m(\"a\", \"Next\")\n          )\n        ])\n      }\n    }\n  }\n}\n\nexport const ProgressBar = () => {\n  return {\n    view: ({\n      attrs: {\n        mdl: {\n          state: {\n            loadingProgress: { value, max }\n          }\n        }\n      }\n    }) => {\n      return m(\n        \".progressBar\",\n        m(\"progress.progress\", { max: max(), value: value() })\n      )\n    }\n  }\n}\n\nexport const NavBar = () => {\n  return {\n    view: ({ children, attrs: { mdl } }) =>\n      m(\n        \"header\",\n        { class: \"navbar\" },\n        children.map((child) =>\n          m(\"section\", { class: \"navbar-section\" }, child)\n        )\n      )\n  }\n}\n\nexport const ListSelector = () => {\n  return {\n    view: ({ attrs: { list, action, active } }) => {\n      return m(\n        \"li.menu-item\",\n        m(\n          \"a.btn\",\n          {\n            class: active && \"active\",\n            onclick: action\n          },\n          list\n        )\n      )\n    }\n  }\n}\n\nexport const Button = () => {\n  return {\n    view: ({ attrs: { classList, action, label } }) =>\n      m(`button.btn.${classList}`, { onclick: action }, label)\n  }\n}\n\nexport const Input = ({ attrs: { type, label, action, id, placeholder } }) => {\n  return {\n    view: ({ attrs: { value } }) =>\n      m(\".form-group\", [\n        m(\"label.form-label\", { for: id }, label),\n        m(\"input.form-input\", {\n          type,\n          id,\n          placeholder,\n          value,\n          onchange: action\n        })\n      ])\n  }\n}\n\nexport const CheckBox = ({ attrs: { label, action, id, type } }) => {\n  return {\n    view: ({ attrs: { value } }) =>\n      m(\".form-group\", [\n        m(\n          `label.form-${type}`,\n          { for: id, onclick: action },\n          m(\"input\", {\n            type: \"checkbox\",\n            checked: value\n          }),\n          m(\"i.form-icon\", {\n            id\n          }),\n          label\n        )\n      ])\n  }\n}\n\nexport const DropDown = ({ attrs: { label, classList } }) => {\n  return {\n    view: ({ children }) =>\n      m(\n        \".dropdown\",\n        { class: classList },\n        m(\n          \"a.btn btn-link dropdown-toggle\",\n          { href: \"#\", tabindex: \"0\" },\n          label,\n          m(\"i.icon icon-caret\")\n        ),\n        children\n      )\n  }\n}\n\nexport const MenuItem = () => {\n  return {\n    view: ({ children }) => m(\"li.menu-item\", children)\n  }\n}\n\nexport const Menu = () => {\n  return {\n    view: ({ children }) =>\n      m(\"ul.menu\", children.map((child) => m(MenuItem, child)))\n  }\n}\n","import m from \"mithril\"\n\nconst Schedule = () => {\n  return {\n    view: ({ attrs: { mdl } }) => m(\".schedule\", \"Schedule\")\n  }\n}\n\nexport default Schedule\n","import http from \"../Http.js\"\nimport { isNil } from \"ramda\"\nimport { Loader, Button, ListSelector } from \"../components/Elements\"\nimport {\n  getShowDetailsTask,\n  getEpisodeTask,\n  deleteShowTask,\n  updateShowDetailsTask,\n  onError,\n  formatError\n} from \"./fns.js\"\n\nconst updateShow = (mdl, update) =>\n  updateShowDetailsTask(http)(mdl)(update).fork(\n    onError(mdl)(\"details\"),\n    mdl.data.details\n  )\n\nconst Episode = () => {\n  let epsData = undefined\n  const getEpisode = (mdl) => (episode) =>\n    getEpisodeTask(http)(episode).fork(\n      onError(mdl)(\"episodes\"),\n      (s) => (epsData = s)\n    )\n\n  return {\n    oninit: ({ attrs: { mdl, eps } }) => getEpisode(mdl)(eps),\n    view: ({ attrs: { mdl, eps } }) =>\n      epsData &&\n      m(\".episode.column\", [\n        m(\"img.img-responsive.img-fit-cover\", {\n          src: epsData.image\n        }),\n        // m(\"pre\", JSON.stringify(epsData, null, 4)),\n        m(TextBlock, {\n          label: `${epsData.name}:  `,\n          text: epsData.airdate\n        }),\n        m(TextBlock, {\n          label: \"Season - Ep:  \",\n          text: `${epsData.season} - ${epsData.number}`\n        })\n      ])\n  }\n}\n\nconst ListSelection = () => {\n  let showOpts = true\n  return {\n    view: ({ attrs: { mdl, list } }) =>\n      m(\".dropdown\", [\n        m(\n          \"a.btn btn-link dropdown-toggle\",\n          { onclick: () => (showOpts = true), tabindex: \"0\" },\n          [list, m(\"i.icon icon-caret\")]\n        ),\n        showOpts &&\n          m(\n            \"ul.menu\",\n            mdl.user.lists().map((list, idx) =>\n              m(ListSelector, {\n                list,\n                action: () => {\n                  updateShow(mdl, { listStatus: list })\n                  showOpts = false\n                },\n                key: idx,\n                mdl\n              })\n            )\n          )\n      ])\n  }\n}\n\nconst deleteShow = (mdl) => (show) =>\n  deleteShowTask(http)(show.objectId).fork(\n    onError(mdl)(\"details\"),\n    (updatedShows) => {\n      m.route.set(\"/home\")\n      mdl.user.shows(updatedShows)\n    }\n  )\n\nconst getId = () => m.route.param().id\n\nconst getShowDetails = (http) => (mdl) =>\n  getShowDetailsTask(mdl)(http)(getId()).fork(\n    (e) => mdl.errors.details(formatError(e)),\n    mdl.data.details\n  )\n\nconst TextBlock = () => {\n  return {\n    view: ({ attrs: { label, text } }) =>\n      m(\".formGroup\", [m(\"strong\", label), (\"time\", text)])\n  }\n}\n\nconst DetailCard = () => {\n  return {\n    view: ({ attrs: { show, mdl } }) => {\n      // console.log(\"show\", show)\n      return m(\".menu.columns\", [\n        m(\"div.form-group.col-6\", [\n          m(TextBlock, {\n            label: show.name\n          }),\n          m(\"img.img-responsive.img-fit-cover\", {\n            src: show.image\n          }),\n          m(\n            \"b.btn btn-action btn-error btn-s s-circle deleteIcon \",\n            {\n              onclick: () => deleteShow(mdl)(show)\n            },\n            m(\"i.icon icon-cross\")\n          ),\n          (show.network || show.webChannel) &&\n            m(TextBlock, {\n              label: \"Channel: \",\n              text: show.network || show.webChannel\n            }),\n          m(TextBlock, {\n            label: \"Status:  \",\n            text: show.status\n          }),\n          m(TextBlock, {\n            label: \"Genre:  \",\n            text: show.genre\n          })\n        ]),\n        m(\"div.form-group.col-6\", [\n          m(ListSelection, { mdl, list: show.listStatus }),\n\n          m(\"label.form-label[for='notes']\", \"Notes\"),\n          m(\"textarea.form-input[id='notes'][placeholder='Notes'][rows='10']\", {\n            value: show.notes,\n            oninput: (e) => (show.notes = e.target.value)\n          }),\n          m(Button, {\n            classList: \"\",\n            action: () => updateShow(mdl, { notes: show.notes }),\n            label: \"Save Notes\"\n          })\n        ]),\n        m(\n          \".columns.col-12\",\n          m(\"h2\", \"Episodes\"),\n          show.links.map((eps, idx) => m(Episode, { mdl, eps, key: idx }))\n        )\n      ])\n    }\n  }\n}\n\nconst Details = () => {\n  return {\n    oninit: ({ attrs: { mdl } }) => {\n      getShowDetails(http)(mdl)\n    },\n    view: ({ attrs: { mdl } }) => {\n      return m(\".container\", [\n        isNil(mdl.data.details())\n          ? m(Loader)\n          : m(DetailCard, { mdl, show: mdl.data.details() }),\n        mdl.errors.details() !== null &&\n          m(\".toast.toast-error\", [\n            m(\"p\", [\n              mdl.errors.details().response.status_message,\n              m(\n                \"b.btn btn-action btn-error btn-s s-circle deleteIcon \",\n                {\n                  onclick: () => deleteShow(mdl)(mdl.data.details())\n                },\n                m(\"i.icon icon-cross\")\n              )\n            ]),\n            m(\"p\", \"Choose a different show\")\n          ])\n      ])\n    },\n    onbeforeremove: ({ attrs: { mdl } }) => {\n      mdl.errors.details(null)\n      mdl.data.details(null)\n      mdl.state.details.selected(null)\n    }\n  }\n}\n\nexport default Details\n","import http from \"../Http.js\"\nimport { getShows, filterShowsByListType } from \"./fns.js\"\nimport { isEmpty } from \"ramda\"\n\nconst NoShows = m(\".container.empty\", [\n  m(\"p.empty-title h5\", \"You have no shows yet!\"),\n  m(\"p.empty-subtitle\", \"Click search to find your shows.\")\n])\n\nconst getShowsTask = (mdl) => (http) =>\n  getShows(http).fork(mdl.errors, mdl.user.shows)\n\nconst selectedShows = () => {\n  const toDetailsPage = (mdl) => (show) => {\n    mdl.state.details.selected(show.objectId)\n    m.route.set(`/details/${show.objectId}`)\n  }\n\n  return {\n    view: ({ attrs: { mdl } }) =>\n      filterShowsByListType(mdl).map((show, idx) =>\n        m(\n          \".tileCard\",\n          {\n            key: idx\n          },\n          m(\"img.img-responsive.img-fit-cover\", {\n            onclick: () => toDetailsPage(mdl)(show),\n            src: show.image\n          })\n        )\n      )\n  }\n}\n\nconst Home = () => {\n  return {\n    oninit: ({ attrs: { mdl } }) => getShowsTask(mdl)(http),\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \"section.tiles\",\n        isEmpty(mdl.user.shows()) ? NoShows : m(selectedShows, { mdl })\n      )\n  }\n}\nexport default Home\n","import m from \"mithril\"\nimport { ListSelector } from \"../components/Elements.js\"\n\nconst FilterLists = () => {\n  const selectList = (mdl, list) => mdl.state.currentList(list)\n  let show = true\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\".dropdown\", [\n        m(\n          \"a.btn btn-link dropdown-toggle\",\n          { onclick: () => (show = true), tabindex: \"0\" },\n          [mdl.state.currentList(), m(\"i.icon icon-caret\")]\n        ),\n        show &&\n          m(\n            \"ul.menu\",\n            mdl.user.lists().map((list, idx) =>\n              m(ListSelector, {\n                list,\n                action: () => {\n                  selectList(mdl, list)\n                  show = false\n                },\n                key: idx,\n                mdl\n              })\n            )\n          )\n      ])\n  }\n}\n\nconst HomeToolBar = () => {\n  return {\n    view: ({ attrs: { mdl } }) => m(\"nav.navbar\", m(FilterLists, { mdl }))\n  }\n}\n\nexport default HomeToolBar\n","import m from \"mithril\"\nimport http from \"../Http.js\"\nimport { searchShowsTask, onError } from \"./fns.js\"\n\nconst SearchInput = () => {\n  const searchShows = (mdl) =>\n    searchShowsTask(mdl)(http).fork(onError(mdl)(\"search\"), mdl.data.shows)\n\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".searchForm\",\n        m(\".form-group\", [\n          m(\"input.form-input\", {\n            type: \"text\",\n            id: \"search\",\n            placeholder: \"search\",\n            value: mdl.state.query(),\n            oninput: (e) => mdl.state.query(e.target.value),\n            onchange: () => searchShows(mdl)\n          })\n        ])\n      )\n  }\n}\n\nexport default SearchInput\n","import m from \"mithril\"\nimport SearchResults from \"./Search-Results.js\"\n\nconst Search = () => {\n  return {\n    view: ({ attrs: { mdl } }) => m(\".search\", [m(SearchResults, { mdl })]),\n    onbeforeremove: ({ attrs: { mdl } }) => {\n      mdl.state.query(\"\")\n      mdl.data.shows([])\n      mdl.state.paginate.page(1)\n      mdl.state.paginate.total_pages(0)\n      mdl.state.paginate.total_results(0)\n      mdl.state.searchItem.showMenu(false)\n    }\n  }\n}\n\nexport default Search\n","import m from \"mithril\"\nimport http from \"../Http.js\"\nimport {\n  showListSelection,\n  propIsDefined,\n  updateUserShowsTask,\n  addUserShowsTask,\n  onError,\n  updateShowStatus\n} from \"./fns.js\"\nimport { ListSelector } from \"../components/Elements.js\"\n\nconst onSuccess = (mdl) => (d) => {\n  mdl.user.shows(d)\n  // updating the mdl.data with show details from the user list and the search results list.\n  mdl.data.shows(updateShowStatus(mdl.user.shows())(mdl.data.shows()))\n}\n\nconst updateUserShows = (mdl) => (result, list) =>\n  updateUserShowsTask(http)(result)(list).fork(\n    onError(mdl)(\"search\"),\n    onSuccess(mdl)\n  )\n\nconst addUserShows = (mdl) => (result, list) =>\n  addUserShowsTask(http)(mdl)(result)(list).fork(\n    onError(mdl)(\"search\"),\n    onSuccess(mdl)\n  )\n\nconst ListSelection = () => {\n  return {\n    view: ({ attrs: { mdl, result } }) => {\n      return m(\n        \"ul.menu\",\n        mdl.user.lists().map((list, idx) =>\n          m(ListSelector, {\n            list,\n            active: list == result.listStatus,\n            key: idx,\n            mdl,\n            action: () => {\n              if (result.listStatus != list) {\n                result.listStatus == undefined\n                  ? addUserShows(mdl)(result, list)\n                  : updateUserShows(mdl)(result, list)\n              }\n            }\n          })\n        )\n      )\n    }\n  }\n}\n\nconst Result = () => {\n  return {\n    view: ({ attrs: { mdl, result } }) =>\n      m(\".menu\", [\n        m(\"img.img-responsive.img-fit-cover\", {\n          class: propIsDefined(\"objectId\")(result) && \"selected\",\n          onclick: () => mdl.state.searchItem.showMenu(result.tvmazeId),\n          src: result.image\n        }),\n\n        showListSelection(mdl)(result) &&\n          m(ListSelection, {\n            mdl,\n            result\n          })\n      ])\n  }\n}\n\nconst SearchResults = () => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \"section.tiles\",\n        mdl.data.shows()\n          ? mdl.data\n              .shows()\n              .map((result, idx) => m(Result, { mdl, result, key: idx }))\n          : []\n      )\n  }\n}\n\nexport default SearchResults\n","import {\n  replace,\n  without,\n  assoc,\n  lensPath,\n  over,\n  lensProp,\n  map,\n  compose,\n  propEq,\n  prop,\n  find,\n  set,\n  filter,\n  view,\n  not,\n  anyPass,\n  pluck,\n  reject,\n  traverse,\n  join,\n  head,\n  equals\n} from \"ramda\"\n\nexport const log = (m) => (v) => {\n  console.log(m, v)\n  return v\n}\n\nexport const formatError = (error) => JSON.parse(JSON.stringify(error))\n\nconst formatLinks = (links) => {\n  let prev = view(lensPath([\"previousepisode\", \"href\"]), links)\n  let next = view(lensPath([\"nextepisode\", \"href\"]), links)\n\n  let urls = without([undefined], [prev, next])\n  return urls\n}\n\nconst toEpisodeViewModel = ({\n  name,\n  season,\n  number,\n  airdate,\n  image,\n  _links\n}) => ({\n  name,\n  season,\n  number,\n  airdate,\n  image: image && (makeHttps(image.original) || makeHttps(image.medium)),\n  links: formatLinks(_links)\n})\n\nconst toDetailsViewModel = ({\n  image,\n  tvmazeId,\n  objectId,\n  listStatus,\n  name,\n  notes\n}) => ({\n  webChannel,\n  network,\n  status,\n  genres,\n  premiered,\n  summary,\n  _links\n}) => ({\n  name,\n  notes,\n  genre: join(\" \", genres),\n  premiered,\n  summary,\n  links: formatLinks(_links),\n  image,\n  tvmazeId,\n  objectId,\n  listStatus,\n  webChannel: webChannel && webChannel.name,\n  network: network && network.name,\n  status\n})\n\nconst makeHttps = replace(\"http\", \"https\")\n\nexport const toSearchViewModel = ({ name, image, id }) => ({\n  image: image && (makeHttps(image.original) || makeHttps(image.medium)),\n  tvmazeId: id,\n  name\n  // endpoint: getExternalId(externals)\n})\n\nexport const toDbModel = ({ listStatus, notes, name, tvmazeId, image }) => ({\n  image,\n  listStatus,\n  notes,\n  name,\n  tvmazeId\n})\n\nexport const onError = (mdl) => (type) => (error) => mdl.errors[type](error)\n\nconst rejectWithAttr = (attr) => (value) => reject(propEq(attr, value))\n\nconst updateResults = (result) => (show) => {\n  if (show) {\n    return assoc(\n      \"objectId\",\n      show.objectId,\n      set(lensProp(\"listStatus\"), prop(\"listStatus\", show), result)\n    )\n  } else {\n    return result\n  }\n}\n\nexport const updateShowStatus = (shows) => (data) =>\n  data.map((r) =>\n    compose(\n      updateResults(r),\n      find(propEq(\"tvmazeId\", r.tvmazeId))\n    )(shows)\n  )\n\nexport const getShows = (http) =>\n  http.getTask(http.backendlessUrl(\"devshows?pagesize=100\"))\n\nexport const searchShowsTask = (mdl) => (http) =>\n  http\n    .getTask(http.searchUrl(mdl.state.query()))\n    .map(pluck(\"show\"))\n    .map(map(toSearchViewModel))\n    .map(rejectWithAttr(\"image\")(null))\n    .map(updateShowStatus(mdl.user.shows()))\n\nconst itemSelected = (mdl) => (result) =>\n  equals(prop(\"tvmazeId\", result), mdl.state.searchItem.showMenu())\n\nexport const propIsDefined = (attr) =>\n  compose(\n    not,\n    propEq(attr, undefined)\n  )\n\nexport const showListSelection = (mdl) =>\n  anyPass([itemSelected(mdl), propIsDefined(\"objectId\")])\n\nconst updateListStatus = (show) => (listType) =>\n  over(lensProp(\"listStatus\"), () => listType, show)\n\nconst createBody = (dto) => ({\n  body: dto\n})\n\nexport const toDto = (show, listType) =>\n  createBody(updateListStatus(show)(listType))\n\nexport const addUserShowsTask = (http) => (mdl) => (show) => (list) =>\n  http\n    .postTask(http.backendlessUrl(\"devshows\"), toDto(show, list))\n    .chain((_) => getShows(http))\n    .map(mdl.user.shows)\n\nexport const updateUserShowsTask = (http) => (show) => (list) =>\n  http\n    .putTask(\n      http.backendlessUrl(`devshows\\\\${show.objectId}`),\n      toDto(show, list)\n    )\n    .chain((_) => getShows(http))\n\nexport const deleteShowTask = (http) => (id) =>\n  http\n    .deleteTask(http.backendlessUrl(`devshows/${id}`))\n    .chain((_) => getShows(http))\n\nexport const updateShowDetailsTask = (http) => (mdl) => (dto) =>\n  http\n    .putTask(http.backendlessUrl(`devshows/${mdl.data.details().objectId}`), {\n      body: dto\n    })\n    .chain(({ objectId }) => getShowDetailsTask(mdl)(http)(objectId))\n\nconst getShowDetails = (mdl) => (http) => (show) =>\n  http\n    .getTask(http.tvMazeDetailsUrl(show.tvmazeId))\n    .map(toDetailsViewModel(show))\n\nconst findShowInDbTask = (http) => (id) =>\n  http.getTask(http.backendlessUrl(`devshows/${id}`))\n\nexport const getShowDetailsTask = (mdl) => (http) => (id) =>\n  findShowInDbTask(http)(id).chain(getShowDetails(mdl)(http))\n\nexport const filterShowsByListType = (mdl) =>\n  filter(propEq(\"listStatus\", mdl.state.currentList()), mdl.user.shows())\n\nexport const getEpisodeTask = (http) => (episodeUrl) =>\n  http.getTask(episodeUrl).map(toEpisodeViewModel)\n","export const tmdbApiKey = \"1e4d78ab60660282c63379725fc9b111\"\nexport const tmdbAuth = {\n  Authorization:\n    \"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxZTRkNzhhYjYwNjYwMjgyYzYzMzc5NzI1ZmM5YjExMSIsInN1YiI6IjVkYmNjMjBjOTdhNGU2MDAxNTdjNjkxYyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.TgL91o4VHyQo4cm3KLx6nVICyrn8E8pXDC1zMdlDFsU\"\n}\nexport const tmdbBaseUrl = \"https://api.themoviedb.org/3\"\n\nexport const tvMazeApiKey = \"F4-A2-dEzYi0oXvzbNWON3_nrnPSt9Yv\"\nexport const tvMazeBaseUrl = \"https://api.tvmaze.com\"\n","import m from 'mithril'\r\n\r\nexport const IsLoading = m('.holder', [\r\n  m('.preloader', [\r\n    m('div'),\r\n    m('div'),\r\n    m('div'),\r\n    m('div'),\r\n    m('div'),\r\n    m('div'),\r\n    m('div'),\r\n  ]),\r\n])\r\n\r\nexport const animateComponentEntrance = (idx) => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  return setTimeout(() => {\r\n    dom.classList.toggle('stretchRight')\r\n    dom.style.opacity = 1\r\n  }, idx * 100 + 20)\r\n}\r\n\r\nexport const animateSidebarEntrance = ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  dom.classList.toggle('slideRight')\r\n  dom.style.opacity = 1\r\n}\r\n\r\nexport const animateChildrenEntrance = ({ dom }) => {\r\n  let children = [...dom.children]\r\n\r\n  return children.map((child, idx) => {\r\n    child.style.opacity = 0\r\n    setTimeout(() => {\r\n      child.classList.toggle('slideRight')\r\n      child.style.opacity = 1\r\n    }, (idx + 1) * 10)\r\n  })\r\n}\r\n\r\nexport const animateChildrenLimitsEntrance = (idx) => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  setTimeout(() => {\r\n    dom.classList.toggle('slideDown')\r\n    dom.style.opacity = 1\r\n  }, (idx + 1) * 200)\r\n}\r\n\r\nexport const animate = (dir) => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  setTimeout(() => {\r\n    dom.classList.toggle(dir)\r\n    dom.style.opacity = 1\r\n  }, 200)\r\n}\r\n\r\nexport const slideModalOut = ({ dom }) => {\r\n  return new Promise(() => {\r\n    dom.classList.remove('slideRight')\r\n    return setTimeout(() => {\r\n      dom.classList.add('reverseAnimation', 'slideRight')\r\n    }, 200)\r\n  })\r\n}\r\n\r\nexport const animateChildrenLimitsExit = ({ dom }) =>\r\n  new Promise(() => {\r\n    [...dom.children].reverse().map((child, idx) => {\r\n      return setTimeout(() => {\r\n        child.style.display = 'none'\r\n      }, idx * 100)\r\n    })\r\n  })\r\n","import {\r\n  compose,\r\n  join,\r\n  values,\r\n  props,\r\n  assoc,\r\n  test,\r\n  prop,\r\n  filter,\r\n  sortBy,\r\n  toLower,\r\n  identity,\r\n  reverse,\r\n  slice,\r\n  split,\r\n  trim,\r\n  max,\r\n  min,\r\n  map\r\n} from \"ramda\"\r\nimport Task from \"data.task\"\r\n\r\nexport const infiniteScroll = (mdl) => (e) => {\r\n  let route = mdl.state.route\r\n  let length = mdl.data[route].data.length\r\n  let setpoint = 10 * length * mdl.state.scrollPos\r\n  if (e.target.scrollTop - mdl.state.scrollPos >= setpoint) {\r\n    mdl.state.scrollPos++ + e.target.scrollTop\r\n  }\r\n}\r\n\r\nexport const addTerms = (item) => {\r\n  const terms = compose(\r\n    join(\" \"),\r\n    values,\r\n    props([\"uuid\", \"id\", \"name\"])\r\n  )(item)\r\n\r\n  return assoc(\"_terms\", terms, item)\r\n}\r\n\r\nconst byTerms = (query) =>\r\n  compose(\r\n    test(new RegExp(query, \"i\")),\r\n    prop(\"name\")\r\n  )\r\n\r\nexport const _search = (query) => compose(filter(byTerms(query)))\r\n\r\nexport const _sort = (p) =>\r\n  sortBy(\r\n    compose(\r\n      toLower,\r\n      toString,\r\n      prop(p)\r\n    )\r\n  )\r\n\r\nexport const _direction = (dir) => (dir == \"asc\" ? identity : reverse)\r\n\r\nexport const _paginate = (offset) => (limit) => (data) =>\r\n  slice(\r\n    max(0, min(offset, data.length)),\r\n    min(offset + limit, data.length),\r\n    data\r\n  )\r\n\r\nexport const filterTask = (query) => (prop) => (direction) => (offset) => (\r\n  limit\r\n) =>\r\n  compose(\r\n    Task.of,\r\n    map(_paginate(offset)(limit)),\r\n    map(_direction(direction)),\r\n    map(_sort(prop)),\r\n    _search(query)\r\n  )\r\n\r\nexport const debounce = (wait, now) => (fn) => {\r\n  let timeout = undefined\r\n  return function() {\r\n    let context = this\r\n    let args = arguments\r\n    let later = function() {\r\n      timeout = undefined\r\n      if (!now) fn.apply(context, args)\r\n    }\r\n    let callNow = now && !timeout\r\n    clearTimeout(timeout)\r\n    timeout = setTimeout(later, wait)\r\n    console.log(fn)\r\n    if (callNow) fn.apply(context, args)\r\n  }\r\n}\r\n\r\nexport const scrollToAnchor = (anchor) => {\r\n  let is = (el) => el !== undefined && el !== null\r\n\r\n  //if you pass an undefined anchor it will scroll to the top of the body\r\n  let targetEl = is(anchor) ? document.getElementById(anchor) : document.body\r\n  let scrollTop = window.pageYOffset || document.documentElement.scrollTop\r\n  let target = is(targetEl) ? targetEl.getBoundingClientRect().top : 0\r\n  window.scroll({\r\n    top: target + scrollTop - 10,\r\n    left: 0,\r\n    behavior: \"smooth\"\r\n  })\r\n}\r\n\r\nexport const jsonCopy = (src) => JSON.parse(JSON.stringify(src))\r\n","export * from \"./animations.js\"\r\nexport * from \"./helpers.js\"\r\n"]}