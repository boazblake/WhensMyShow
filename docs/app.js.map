{"version":3,"sources":["app/components/button.js","app/components/canvas.js","app/components/navbar.js","app/components/toolbar.js","app/initialize.js","app/model.js","app/pages/easel.js","app/pages/gallery.js","app/paint.js"],"names":["Button","view","attrs","classList","action","label","onclick","Canvas","oncreate","dom","ctx","mdl","newCtx","getContext","putImageData","style","transform","rotateCanvas","id","Navbar","m","route","get","artworks","map","isEmpty","preventUpdate","orientation","set","EaselTools","includes","Toolbar","Main","children","Layout","routes","render","Easel","key","Date","now","onmatch","length","Gallery","document","addEventListener","root","body","Model","WIDTH","HEIGHT","getDpr","size","window","devicePixelRatio","log","v","console","rand","min","max","Math","floor","random","last","xs","rest","head","getPosition","x","width","y","height","getRotation","getWidth","getHeight","getHue","range","Array","keys","saveArt","art","image","push","animateComponentEntrance","idx","transition","opacity","setTimeout","add","animateComponentExit","Promise","resolve","shapes","count","canvas","oninit","createElement","imageSmoothingQuality","filter","scale","getImageData","GalleryTools","e","redraw","a","href","toDataURL","download","display","appendChild","click","remove","Modal","close","resetModal","show","state","from","c","target","scrollTo","hsla","h","s","l","drawSquare","position","rotation","hue","color","save","fillStyle","translate","rotate","fillRect","restore","drawTriangle","beginPath","moveTo","lineTo","closePath","fill","createArt","shape","getShape","Paint","_"],"mappings":"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","file":"docs/app.js","sourcesContent":["import m from \"mithril\"\n\nconst Button = () => {\n  return {\n    view: ({ attrs: { classList, action, label } }) =>\n      m(`button.btn.${classList}`, { onclick: action }, label)\n  }\n}\n\nexport default Button\n","import m from \"mithril\"\n\nconst Canvas = () => {\n  return {\n    oncreate: ({ dom, attrs: { ctx, mdl } }) => {\n      let newCtx = dom.getContext(\"2d\")\n      ctx && newCtx.putImageData(ctx, 0, 0)\n      dom.style.transform = `rotate(${mdl.rotateCanvas()}deg)`\n    },\n    view: ({ attrs: { classList, id } }) => m(`canvas.${classList}`, { id })\n  }\n}\n\nexport default Canvas\n","import m from \"mithril\"\nimport Button from \"./button.js\"\nimport { isEmpty } from \"../model\"\n\nconst Navbar = () => {\n  return {\n    view: ({ attrs: { mdl } }) => {\n      return m(\n        \"nav.navbar\",\n        m.route.get() == \"/easel\"\n          ? mdl.artworks.map(isEmpty) &&\n              m(Button, {\n                mdl,\n                classList: \"navBtn\",\n                action: () => {\n                  mdl.preventUpdate(false)\n                  mdl.orientation = \"portrait\"\n                  m.route.set(\"/print\")\n                },\n                label: \"View Gallery\"\n              })\n          : m(Button, {\n              mdl,\n              classList: \"navBtn\",\n              action: () => {\n                mdl.preventUpdate(true)\n                m.route.set(\"/easel\")\n              },\n              label: \"Commision New Painting\"\n            })\n      )\n    }\n  }\n}\n\nexport default Navbar\n","import m from \"mithril\"\nimport Button from \"./button.js\"\n\nconst EaselTools = () => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \"aside.navbar\",\n        m(Button, {\n          mdl,\n          classList: \"toolBtn\",\n          action: () => {\n            mdl.preventUpdate(true)\n            mdl.orientation = \"portrait\"\n            m.route.set(\"/easel\")\n          },\n          label: \"New Painting\"\n        }),\n        m(Button, {\n          mdl,\n          classList: \"toolBtn\",\n          action: () => {\n            mdl.preventUpdate(false)\n            mdl.orientation = \"portrait.animated\"\n            mdl.rotateCanvas(\n              mdl.rotateCanvas() + 90 >= 360 ? 0 : mdl.rotateCanvas() + 90\n            )\n            m.route.set(\"/easel\")\n          },\n          label: \"Rotate Painting Clockwise\"\n        }),\n        m(Button, {\n          mdl,\n          classList: \"toolBtn\",\n          action: () => {\n            mdl.preventUpdate(false)\n\n            mdl.orientation.includes(\"portrait\")\n              ? (mdl.orientation = \"animated.rollAround.landscape\")\n              : (mdl.orientation = \"animated.rollAround.portrait\")\n          },\n          label: mdl.orientation.includes(\"portrait\") ? \"landscape\" : \"portrait\"\n        })\n      )\n  }\n}\n\nconst Toolbar = () => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m.route.get() == \"/easel\" && m(EaselTools, { mdl })\n  }\n}\n\nexport default Toolbar\n","import m from \"mithril\"\nimport Model from \"./model.js\"\nimport Navbar from \"./components/navbar\"\nimport Toolbar from \"./components/toolbar\"\nimport Easel from \"./pages/easel.js\"\nimport Gallery from \"./pages/gallery.js\"\n\nconst Main = () => {\n  return { view: ({ children }) => m(\"section.main\", children) }\n}\n\nconst Layout = () => {\n  return {\n    view: ({ children, attrs: { mdl } }) =>\n      m(\".app\", [\n        m(Navbar, { mdl }),\n        m(Main, { mdl }, children),\n        m(Toolbar, { mdl })\n      ])\n  }\n}\n\nconst routes = (mdl) => {\n  return {\n    \"/easel\": {\n      render: () => m(Layout, { mdl }, m(Easel, { mdl, key: Date.now() }))\n    },\n    \"/gallery\": {\n      onmatch: () => {\n        if (mdl.artworks().length == 0) return m.route.set(\"/easel\")\n        mdl.rotateCanvas(0)\n      },\n      render: () => m(Layout, { mdl }, m(Gallery, { mdl }))\n    }\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const root = document.body\n  m.route(root, \"/gallery\", routes(Model))\n})\n","import Stream from \"mithril-stream\"\n\nconst WIDTH = Stream(600)\nconst HEIGHT = Stream(600)\n\nconst getDpr = (size) => size * window.devicePixelRatio || 1\n\nexport const log = (m) => (v) => {\n  console.log(m, v)\n  return v\n}\n\nconst rand = (min, max) => Math.floor(Math.random() * (max - min) + min)\nexport const last = (xs) => xs[xs.length - 1]\nexport const rest = ([head, ...rest]) => rest\n\nexport const getPosition = (mdl) => ({\n  x: rand(0, mdl.width()),\n  y: rand(0, mdl.height())\n})\nexport const getRotation = () => rand(0, 360)\nexport const getWidth = (mdl) => rand(0, mdl.width())\nexport const getHeight = (mdl) => rand(0, mdl.height())\nexport const getHue = () => rand(0, 999)\nexport const range = (size) => [...Array(size).keys()]\n\nexport const isEmpty = (xs) => xs.length == 0\n\nconst saveArt = (mdl, art) => {\n  let image = { id: mdl.artworks().length, art }\n  mdl.artworks.map((xs) => xs.push(image))\n}\n\nexport const animateComponentEntrance = (idx, transition) => ({ dom }) => {\n  dom.style.opacity = 0\n  return setTimeout(() => {\n    dom.classList.add(transition)\n    dom.style.opacity = 1\n  }, idx * 100 + 20)\n}\n\nexport const animateComponentExit = (idx, transition) => ({ dom }) => {\n  console.log(dom)\n  dom.style.opacity = 1\n\n  return new Promise(function(resolve) {\n    setTimeout(() => {\n      dom.classList.add(transition)\n      dom.style.opacity = 0\n    }, idx * 100 + 20)\n    dom.addEventListener(\"animationend\", resolve)\n  })\n}\n\nconst shapes = [\"circle\", \"square\", \"triangle\"]\n\nconst Model = {\n  count: Stream(rand(30, 70)),\n  preventUpdate: Stream(true),\n  shapes,\n  width: Stream(600),\n  height: Stream(600),\n  artworks: Stream([]),\n  canvas: Stream(null),\n  ctx: Stream(null),\n  dom: Stream(null),\n  rotateCanvas: Stream(0),\n  saveArt,\n  log,\n  orientation: \"portrait\"\n}\nexport default Model\n","import m from \"mithril\"\nimport Canvas from \"../components/canvas.js\"\nimport Paint from \"../paint.js\"\n\nconst Easel = () => {\n  return {\n    oninit: ({ attrs: { mdl } }) => {\n      if (mdl.preventUpdate()) {\n        let dom = document.createElement(\"canvas\")\n        let ctx = dom.getContext(\"2d\")\n        ctx.imageSmoothingQuality = \"high\"\n        ctx.filter = \"brightness(0.8)\"\n        ctx.scale(0.8, 0.8)\n        Paint({ ctx, mdl })\n        let image = ctx.getImageData(0, 0, mdl.width(), mdl.height())\n        mdl.canvas(image)\n        mdl.ctx(ctx)\n        mdl.dom(dom)\n        mdl.saveArt(mdl, image)\n      }\n    },\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".easel\",\n        m(Canvas, {\n          id: \"canvas\",\n          mdl,\n          classList: mdl.orientation,\n          ctx: mdl.canvas()\n        })\n      )\n  }\n}\n\nexport default Easel\n","import m from \"mithril\"\nimport Canvas from \"../components/canvas\"\nimport Button from \"../components/button\"\nimport { animateComponentEntrance, animateComponentExit } from \"../model.js\"\n\nconst GalleryTools = () => {\n  return {\n    view: ({ attrs: { mdl } }) => {\n      return m(\n        \"aside.navbar.toolbar\",\n        mdl.canvas() !== null && [\n          m(Button, {\n            mdl,\n            classList: \"toolBtn\",\n            action: (e) => {\n              e.redraw = false\n              let a = document.createElement(\"a\")\n              a.href = mdl.dom().toDataURL(\"image/png\")\n              a.download = `AI_Painter_lot#${mdl.artworks().length}.jpg`\n              a.style.display = \"none\"\n              document.body.appendChild(a)\n              a.click()\n              a.remove()\n            },\n            download: `${mdl.canvas()}`,\n            label: \"Download\"\n          })\n        ]\n      )\n    }\n  }\n}\n\nconst Modal = ({ attrs: { close } }) => {\n  return {\n    view: ({ children, attrs: { mdl } }) =>\n      m(\n        \".modalBackground\",\n        {\n          onclick: () => close()\n        },\n        m(\".modal\", children)\n      )\n  }\n}\n\nconst resetModal = ({ attrs: { mdl } }) => mdl.canvas(null)\n\nconst Gallery = () => {\n  return {\n    show: false,\n    close: (state) => (state.show = !state.show),\n    oninit: resetModal,\n    oncreate: ({ dom }) =>\n      Array.from(dom.children).map((c) => (c.style.opacity = 0)),\n    view: ({ state, attrs: { mdl } }) => {\n      return [\n        m(\n          \".gallery\",\n          mdl.artworks().map(({ art }, idx) => {\n            return m(Button, {\n              oncreate: animateComponentEntrance(idx, \"fadeInDownSmall\"),\n              classList: \"paintBtn.animated\",\n              action: (e) => {\n                let dom = e.target\n                let ctx = dom.getContext(\"2d\")\n                ctx.filter = \"brightness(1)\"\n                let image = ctx.getImageData(0, 0, mdl.width(), mdl.height())\n                mdl.canvas(image)\n                mdl.dom(dom)\n                state.close(state)\n                window.scrollTo(0, 0)\n              },\n              label: m(Canvas, { mdl, ctx: art, classList: \"canvas\" })\n            })\n          })\n        ),\n        state.show &&\n          m(\n            Modal,\n            {\n              close: () => {\n                resetModal({ attrs: { mdl } })\n                state.close(state)\n              },\n              mdl\n            },\n            [\n              m(Canvas, {\n                mdl,\n\n                ctx: mdl.canvas(),\n                classList: \"canvas\"\n              }),\n              m(GalleryTools, { mdl })\n            ]\n          )\n      ]\n    }\n  }\n}\n\nexport default Gallery\n","import {\n  range,\n  getPosition,\n  getRotation,\n  getWidth,\n  getHeight,\n  getHue\n} from \"./model\"\n\n// hsla(hue, saturation, lightness, alpha)\n// hue\t0-360\n// saturation\t0-100%\n// lightness\t0-50-100%\n// alpha\t0.0-1.0\nconst hsla = (h, s, l, a) => `hsla(${h}, ${s}, ${l}, ${a})`\n\nconst drawSquare = (ctx, position, rotation, width, height, hue) => {\n  // console.log(\"square\", position, rotation, width, height)\n  const color = hsla(hue, \"60%\", \"50%\", 0.75)\n  ctx.save()\n  ctx.fillStyle = color\n  ctx.translate(position.x, position.y)\n  ctx.rotate(rotation)\n  ctx.fillRect(-width / 2, -height / 2, width, height)\n  ctx.restore()\n}\n\nconst drawTriangle = (ctx, position, rotation, width, height, hue) => {\n  // console.log(\"triangle\", position, rotation, width, height)\n  const color = hsla(hue, \"60%\", \"50%\", 0.75)\n\n  ctx.save()\n  ctx.fillStyle = color\n  ctx.translate(position.x, position.y)\n  ctx.rotate(rotation)\n\n  ctx.beginPath()\n  ctx.moveTo(width, 0)\n  ctx.lineTo(0, -width / 4)\n  ctx.lineTo(0, width / 4)\n  ctx.closePath()\n\n  ctx.fill()\n  ctx.restore()\n}\n\nconst createArt = (ctx, mdl) => (shape) => {\n  if (shape == \"triangle\")\n    return drawTriangle(\n      ctx,\n      getPosition(mdl),\n      getRotation(),\n      getWidth(mdl),\n      getHeight(mdl),\n      getHue()\n    )\n  if (shape == \"square\")\n    return drawSquare(\n      ctx,\n      getPosition(mdl),\n      getRotation(),\n      getWidth(mdl),\n      getHeight(mdl),\n      getHue()\n    )\n}\n\nconst getShape = (mdl) =>\n  mdl.shapes[Math.floor(Math.random() * mdl.shapes.length)]\n\nconst Paint = ({ ctx, mdl }) =>\n  range(mdl.count())\n    .map((_) => getShape(mdl))\n    .map(createArt(ctx, mdl))\n\nexport default Paint\n"]}