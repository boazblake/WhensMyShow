{"version":3,"sources":["app/components/button.js","app/components/canvas.js","app/components/navbar.js","app/components/toolbar.js","app/initialize.js","app/model.js","app/pages/easel.js","app/pages/gallery.js","app/paint.js"],"names":["Button","view","attrs","classList","action","label","onclick","Canvas","oncreate","dom","ctx","mdl","newCtx","getContext","putImageData","id","Navbar","m","route","get","artworks","map","isEmpty","preventUpdate","set","EaselTools","orientation","includes","GalleryTools","canvas","e","redraw","a","document","createElement","href","toDataURL","download","style","display","body","appendChild","click","remove","Toolbar","Main","children","Layout","routes","render","Easel","key","Date","now","onmatch","length","Gallery","addEventListener","root","Model","WIDTH","HEIGHT","getDpr","size","window","devicePixelRatio","log","console","v","rand","min","max","Math","floor","random","last","xs","rest","head","getPosition","x","width","y","height","getRotation","getWidth","getHeight","getHue","range","Array","keys","saveArt","art","image","push","shapes","count","oninit","imageSmoothingQuality","filter","scale","getImageData","Modal","close","resetModal","show","state","target","hsla","h","s","l","drawSquare","position","rotation","hue","color","save","fillStyle","translate","rotate","fillRect","restore","drawTriangle","beginPath","moveTo","lineTo","closePath","fill","createArt","shape","getShape","Paint","_"],"mappings":"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","file":"docs/app.js","sourcesContent":["import m from \"mithril\"\r\n\r\nconst Button = () => {\r\n  return {\r\n    view: ({ attrs: { classList, action, label } }) =>\r\n      m(`button.btn.${classList}`, { onclick: action }, label)\r\n  }\r\n}\r\n\r\nexport default Button\r\n","import m from \"mithril\"\r\n\r\nconst Canvas = () => {\r\n  return {\r\n    oncreate: ({ dom, attrs: { ctx, mdl } }) => {\r\n      let newCtx = dom.getContext(\"2d\")\r\n      ctx && newCtx.putImageData(ctx, 0, 0)\r\n    },\r\n    view: ({ attrs: { classList, id } }) => m(`canvas.${classList}`, { id })\r\n  }\r\n}\r\n\r\nexport default Canvas\r\n","import m from \"mithril\"\r\nimport Button from \"./button.js\"\r\nimport { isEmpty } from \"../model\"\r\n\r\nconst Navbar = () => {\r\n  return {\r\n    view: ({ attrs: { mdl } }) => {\r\n      return m(\r\n        \"nav.navbar\",\r\n        m.route.get() == \"/easel\"\r\n          ? mdl.artworks.map(isEmpty) &&\r\n              m(Button, {\r\n                mdl,\r\n                classList: \"navBtn\",\r\n                action: () => {\r\n                  mdl.preventUpdate(false)\r\n                  m.route.set(\"/print\")\r\n                },\r\n                label: \"View Gallery\"\r\n              })\r\n          : m(Button, {\r\n              mdl,\r\n              classList: \"navBtn\",\r\n              action: () => {\r\n                mdl.preventUpdate(true)\r\n                m.route.set(\"/easel\")\r\n              },\r\n              label: \"Commision New Painting\"\r\n            })\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default Navbar\r\n","import m from \"mithril\"\r\nimport Button from \"./button.js\"\r\n\r\nconst EaselTools = () => {\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \"aside.navbar\",\r\n        m(Button, {\r\n          mdl,\r\n          classList: \"toolBtn\",\r\n          action: () => {\r\n            mdl.preventUpdate(true)\r\n            m.route.set(\"/easel\")\r\n          },\r\n          label: \"New Painting\",\r\n        }),\r\n        m(Button, {\r\n          mdl,\r\n          classList: \"toolBtn\",\r\n          action: () => {\r\n            mdl.preventUpdate(false)\r\n\r\n            mdl.orientation.includes(\"portrait\")\r\n              ? (mdl.orientation = \"animated.rollAround.landscape\")\r\n              : (mdl.orientation = \"animated.rollAround.portrait\")\r\n          },\r\n          label: mdl.orientation.includes(\"portrait\")\r\n            ? \"landscape\"\r\n            : \"portrait\",\r\n        })\r\n      ),\r\n  }\r\n}\r\n\r\nconst GalleryTools = () => {\r\n  return {\r\n    view: ({ attrs: { mdl } }) => {\r\n      return m(\r\n        \"aside.navbar\",\r\n        mdl.canvas() !== null && [\r\n          m(Button, {\r\n            mdl,\r\n            classList: \"toolBtn\",\r\n            action: e => {\r\n              e.redraw = false\r\n              let a = document.createElement(\"a\")\r\n              a.href = mdl.dom().toDataURL(\"image/png\")\r\n              a.download = \"image_name.jpg\"\r\n              a.style.display = \"none\"\r\n              document.body.appendChild(a)\r\n              a.click()\r\n              a.remove()\r\n            },\r\n            download: `${mdl.canvas()}`,\r\n            label: \"Download\",\r\n          }),\r\n        ]\r\n      )\r\n    },\r\n  }\r\n}\r\n\r\nconst Toolbar = () => {\r\n  return {\r\n    view: ({ attrs: { mdl } }) =>\r\n      m.route.get() == \"/easel\"\r\n        ? m(EaselTools, { mdl })\r\n        : m(GalleryTools, { mdl }),\r\n  }\r\n}\r\n\r\nexport default Toolbar\r\n","import m from \"mithril\"\r\nimport Model from \"./model.js\"\r\nimport Navbar from \"./components/navbar\"\r\nimport Toolbar from \"./components/toolbar\"\r\nimport Easel from \"./pages/easel.js\"\r\nimport Gallery from \"./pages/gallery.js\"\r\n\r\nconst Main = () => {\r\n  return { view: ({ children }) => m(\"section.main\", children) }\r\n}\r\n\r\nconst Layout = () => {\r\n  return {\r\n    view: ({ children, attrs: { mdl } }) =>\r\n      m(\".app\", [\r\n        m(Navbar, { mdl }),\r\n        m(Main, { mdl }, children),\r\n        m(Toolbar, { mdl }),\r\n      ]),\r\n  }\r\n}\r\n\r\nconst routes = mdl => {\r\n  return {\r\n    \"/easel\": {\r\n      render: () => m(Layout, { mdl }, m(Easel, { mdl, key: Date.now() })),\r\n    },\r\n    \"/gallery\": {\r\n      onmatch: () => {\r\n        if (mdl.artworks().length == 0) return m.route.set(\"/easel\")\r\n      },\r\n      render: () => m(Layout, { mdl }, m(Gallery, { mdl })),\r\n    },\r\n  }\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  const root = document.body\r\n  m.route(root, \"/gallery\", routes(Model))\r\n})\r\n","import Stream from \"mithril-stream\"\r\n\r\nconst WIDTH = Stream(600)\r\nconst HEIGHT = Stream(600)\r\n\r\nconst getDpr = size => size * window.devicePixelRatio || 1\r\n\r\nexport const log = m => v => {\r\n  console.log(m, v)\r\n  return v\r\n}\r\n\r\nconst rand = (min, max) => Math.floor(Math.random() * (max - min) + min)\r\nexport const last = xs => xs[xs.length - 1]\r\nexport const rest = ([head, ...rest]) => rest\r\n\r\nexport const getPosition = mdl => ({\r\n  x: rand(0, mdl.width()),\r\n  y: rand(0, mdl.height()),\r\n})\r\nexport const getRotation = () => rand(0, 360)\r\nexport const getWidth = mdl => rand(0, mdl.width())\r\nexport const getHeight = mdl => rand(0, mdl.height())\r\nexport const getHue = () => rand(0, 999)\r\nexport const range = size => [...Array(size).keys()]\r\n\r\nexport const isEmpty = xs => xs.length == 0\r\n\r\nconst saveArt = (mdl, art) => {\r\n  let image = { id: mdl.artworks().length, art }\r\n  mdl.artworks.map(xs => xs.push(image))\r\n}\r\n\r\nconst shapes = [\"circle\", \"square\", \"triangle\"]\r\n\r\nconst Model = {\r\n  count: Stream(rand(30, 70)),\r\n  preventUpdate: Stream(true),\r\n  shapes,\r\n  width: Stream(600),\r\n  height: Stream(600),\r\n  artworks: Stream([]),\r\n  canvas: Stream(null),\r\n  ctx: Stream(null),\r\n  dom: Stream(null),\r\n  saveArt,\r\n  log,\r\n  orientation: \"portrait\",\r\n}\r\nexport default Model\r\n","import m from \"mithril\"\r\nimport Canvas from \"../components/canvas.js\"\r\nimport Paint from \"../paint.js\"\r\n\r\nconst Easel = () => {\r\n  return {\r\n    oninit: ({ attrs: { mdl } }) => {\r\n      if (mdl.preventUpdate()) {\r\n        let dom = document.createElement(\"canvas\")\r\n        let ctx = dom.getContext(\"2d\")\r\n        ctx.imageSmoothingQuality = \"high\"\r\n        ctx.filter = \"brightness(0.8)\"\r\n        ctx.scale(0.8, 0.8)\r\n        Paint({ ctx, mdl })\r\n        let image = ctx.getImageData(0, 0, mdl.width(), mdl.height())\r\n        mdl.canvas(image)\r\n        mdl.ctx(ctx)\r\n        mdl.dom(dom)\r\n        mdl.saveArt(mdl, image)\r\n      }\r\n    },\r\n    view: ({ attrs: { mdl } }) =>\r\n      m(\r\n        \".easel\",\r\n        m(Canvas, {\r\n          id: \"canvas\",\r\n          mdl,\r\n          classList: mdl.orientation,\r\n          ctx: mdl.canvas(),\r\n        })\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Easel\r\n","import m from \"mithril\"\r\nimport Canvas from \"../components/canvas\"\r\nimport Button from \"../components/button\"\r\n\r\nconst Modal = ({ attrs: { close } }) => {\r\n  return {\r\n    view: ({ children, attrs: { close } }) =>\r\n      m(\r\n        \".modalBackground\",\r\n        {\r\n          onclick: () => close()\r\n        },\r\n        m(\".modal\", children)\r\n      )\r\n  }\r\n}\r\n\r\nconst resetModal = ({ attrs: { mdl } }) => mdl.canvas(null)\r\n\r\nconst Gallery = () => {\r\n  return {\r\n    show: false,\r\n    close: (state) => (state.show = !state.show),\r\n    oninit: resetModal,\r\n    view: ({ state, attrs: { mdl } }) => {\r\n      return [\r\n        m(\r\n          \".gallery\",\r\n          mdl.artworks().map(({ art }) => {\r\n            return m(Button, {\r\n              classList: \"paintBtn\",\r\n              action: (e) => {\r\n                let dom = e.target\r\n                let ctx = dom.getContext(\"2d\")\r\n                ctx.filter = \"brightness(1)\"\r\n                let image = ctx.getImageData(0, 0, mdl.width(), mdl.height())\r\n                mdl.canvas(image)\r\n                mdl.dom(dom)\r\n                state.close(state)\r\n              },\r\n              label: m(Canvas, { mdl, ctx: art, classList: \"canvas\" })\r\n            })\r\n          })\r\n        ),\r\n        state.show &&\r\n          m(\r\n            Modal,\r\n            {\r\n              close: () => {\r\n                resetModal({ attrs: { mdl } })\r\n                state.close(state)\r\n              }\r\n            },\r\n            m(Canvas, {\r\n              ctx: mdl.canvas(),\r\n              classList: \"canvas\"\r\n            })\r\n          )\r\n      ]\r\n    }\r\n  }\r\n}\r\n\r\nexport default Gallery\r\n","import {\r\n  range,\r\n  getPosition,\r\n  getRotation,\r\n  getWidth,\r\n  getHeight,\r\n  getHue\r\n} from \"./model\"\r\n\r\n// hsla(hue, saturation, lightness, alpha)\r\n// hue\t0-360\r\n// saturation\t0-100%\r\n// lightness\t0-50-100%\r\n// alpha\t0.0-1.0\r\nconst hsla = (h, s, l, a) => `hsla(${h}, ${s}, ${l}, ${a})`\r\n\r\nconst drawSquare = (ctx, position, rotation, width, height, hue) => {\r\n  // console.log(\"square\", position, rotation, width, height)\r\n  const color = hsla(hue, \"60%\", \"50%\", 0.75)\r\n  ctx.save()\r\n  ctx.fillStyle = color\r\n  ctx.translate(position.x, position.y)\r\n  ctx.rotate(rotation)\r\n  ctx.fillRect(-width / 2, -height / 2, width, height)\r\n  ctx.restore()\r\n}\r\n\r\nconst drawTriangle = (ctx, position, rotation, width, height, hue) => {\r\n  // console.log(\"triangle\", position, rotation, width, height)\r\n  const color = hsla(hue, \"60%\", \"50%\", 0.75)\r\n\r\n  ctx.save()\r\n  ctx.fillStyle = color\r\n  ctx.translate(position.x, position.y)\r\n  ctx.rotate(rotation)\r\n\r\n  ctx.beginPath()\r\n  ctx.moveTo(width, 0)\r\n  ctx.lineTo(0, -width / 4)\r\n  ctx.lineTo(0, width / 4)\r\n  ctx.closePath()\r\n\r\n  ctx.fill()\r\n  ctx.restore()\r\n}\r\n\r\nconst createArt = (ctx, mdl) => (shape) => {\r\n  if (shape == \"triangle\")\r\n    return drawTriangle(\r\n      ctx,\r\n      getPosition(mdl),\r\n      getRotation(),\r\n      getWidth(mdl),\r\n      getHeight(mdl),\r\n      getHue()\r\n    )\r\n  if (shape == \"square\")\r\n    return drawSquare(\r\n      ctx,\r\n      getPosition(mdl),\r\n      getRotation(),\r\n      getWidth(mdl),\r\n      getHeight(mdl),\r\n      getHue()\r\n    )\r\n}\r\n\r\nconst getShape = (mdl) =>\r\n  mdl.shapes[Math.floor(Math.random() * mdl.shapes.length)]\r\n\r\nconst Paint = ({ ctx, mdl }) =>\r\n  range(mdl.count())\r\n    .map((_) => getShape(mdl))\r\n    .map(createArt(ctx, mdl))\r\n\r\nexport default Paint\r\n"]}