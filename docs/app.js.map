{"version":3,"sources":["app/components/button.js","app/components/navbar.js","app/components/toolbar.js","app/initialize.js","app/model.js","app/pages/canvas.js","app/pages/easel.js","app/pages/gallery.js","app/pages/paint.js"],"names":["Button","view","attrs","classList","action","label","onclick","Navbar","mdl","m","route","get","artworks","map","isEmpty","preventUpdate","set","EaselTools","orientation","PrintTools","console","log","Toolbar","Main","children","Layout","routes","render","Easel","key","Date","now","onmatch","a","b","c","length","Gallery","document","addEventListener","root","body","Model","v","rand","min","max","Math","floor","random","last","xs","rest","head","getPosition","x","width","y","height","getRotation","getWidth","getHeight","getHue","range","size","Array","keys","saveArt","art","image","id","push","shapes","count","canvas","Canvas","oncreate","dom","ctx","newCtx","getContext","putImageData","oninit","createElement","clearRect","getImageData","hsla","h","s","l","drawSquare","position","rotation","hue","color","save","fillStyle","translate","rotate","fillRect","restore","drawTriangle","beginPath","moveTo","lineTo","closePath","fill","createArt","shape","getShape","Paint","_"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;AAEA,IAAMA,SAAS,SAATA,MAAS,GAAM;AACnB,SAAO;AACLC,UAAM;AAAA,4BAAGC,KAAH;AAAA,UAAYC,SAAZ,cAAYA,SAAZ;AAAA,UAAuBC,MAAvB,cAAuBA,MAAvB;AAAA,UAA+BC,KAA/B,cAA+BA,KAA/B;AAAA,aACJ,uCAAgBF,SAAhB,EAA6B,EAAEG,SAASF,MAAX,EAA7B,EAAkDC,KAAlD,CADI;AAAA;AADD,GAAP;AAID,CALD;;kBAOeL,M;;;;;;;;;;ACTf;;;;AACA;;;;AACA;;;;AAEA,IAAMO,SAAS,SAATA,MAAS,GAAM;AACnB,SAAO;AACLN,UAAM,oBAAwB;AAAA,UAAZO,GAAY,QAArBN,KAAqB,CAAZM,GAAY;;AAC5B,aAAO,uBACL,YADK,EAELC,kBAAEC,KAAF,CAAQC,GAAR,MAAiB,QAAjB,GACIH,IAAII,QAAJ,CAAaC,GAAb,CAAiBC,cAAjB,KACE,uBAAEd,gBAAF,EAAU;AACRQ,gBADQ;AAERL,mBAAW,QAFH;AAGRC,gBAAQ,kBAAM;AACZI,cAAIO,aAAJ,CAAkB,KAAlB;AACAN,4BAAEC,KAAF,CAAQM,GAAR,CAAY,QAAZ;AACD,SANO;AAORX,eAAO;AAPC,OAAV,CAFN,GAWI,uBAAEL,gBAAF,EAAU;AACRQ,gBADQ;AAERL,mBAAW,QAFH;AAGRC,gBAAQ,kBAAM;AACZI,cAAIO,aAAJ,CAAkB,IAAlB;AACAN,4BAAEC,KAAF,CAAQM,GAAR,CAAY,QAAZ;AACD,SANO;AAORX,eAAO;AAPC,OAAV,CAbC,CAAP;AAuBD;AAzBI,GAAP;AA2BD,CA5BD;;kBA8BeE,M;;;;;;;;;;AClCf;;;;AACA;;;;;;AAEA,IAAMU,aAAa,SAAbA,UAAa,GAAM;AACvB,SAAO;AACLhB,UAAM;AAAA,UAAYO,GAAZ,QAAGN,KAAH,CAAYM,GAAZ;AAAA,aACJ,uBACE,cADF,EAEE,uBAAER,gBAAF,EAAU;AACRQ,gBADQ;AAERL,mBAAW,SAFH;AAGRC,gBAAQ,kBAAM;AACZI,cAAIO,aAAJ,CAAkB,IAAlB;AACAN,4BAAEC,KAAF,CAAQM,GAAR,CAAY,QAAZ;AACD,SANO;AAORX,eAAO;AAPC,OAAV,CAFF,EAWE,uBAAEL,gBAAF,EAAU;AACRQ,gBADQ;AAERL,mBAAW,SAFH;AAGRC,gBAAQ,kBAAM;AACZI,cAAIO,aAAJ,CAAkB,KAAlB;AACAP,cAAIU,WAAJ,IAAmB,UAAnB,GACKV,IAAIU,WAAJ,GAAkB,WADvB,GAEKV,IAAIU,WAAJ,GAAkB,UAFvB;AAGD,SARO;AASRb,eAAOG,IAAIU,WAAJ,IAAmB,UAAnB,GAAgC,WAAhC,GAA8C;AAT7C,OAAV,CAXF,CADI;AAAA;AADD,GAAP;AA0BD,CA3BD;;AA6BA,IAAMC,aAAa,SAAbA,UAAa,GAAM;AACvB,SAAO;AACLlB,UAAM;AAAA,UAAYO,GAAZ,SAAGN,KAAH,CAAYM,GAAZ;AAAA,aACJ,uBAAE,cAAF,EAAkB,CAChB,uBAAER,gBAAF,EAAU;AACRQ,gBADQ;AAERL,mBAAW,SAFH;AAGRC,gBAAQ;AAAA,iBAAMgB,QAAQC,GAAR,CAAY,UAAZ,EAAwBb,GAAxB,CAAN;AAAA,SAHA;AAIRH,eAAO;AAJC,OAAV,CADgB,EAOhB,uBAAEL,gBAAF,EAAU;AACRQ,gBADQ;AAERL,mBAAW,SAFH;AAGRC,gBAAQ;AAAA,iBAAMgB,QAAQC,GAAR,CAAY,OAAZ,EAAqBb,GAArB,CAAN;AAAA,SAHA;AAIRH,eAAO;AAJC,OAAV,CAPgB,CAAlB,CADI;AAAA;AADD,GAAP;AAiBD,CAlBD;;AAoBA,IAAMiB,UAAU,SAAVA,OAAU,GAAM;AACpB,SAAO;AACLrB,UAAM;AAAA,UAAYO,GAAZ,SAAGN,KAAH,CAAYM,GAAZ;AAAA,aACJC,kBAAEC,KAAF,CAAQC,GAAR,MAAiB,QAAjB,GACI,uBAAEM,UAAF,EAAc,EAAET,QAAF,EAAd,CADJ,GAEI,uBAAEW,UAAF,EAAc,EAAEX,QAAF,EAAd,CAHA;AAAA;AADD,GAAP;AAMD,CAPD;;kBASec,O;;;;;;AC7Df;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMC,OAAO,SAAPA,IAAO,GAAM;AACjB,SAAO,EAAEtB,MAAM;AAAA,UAAGuB,QAAH,QAAGA,QAAH;AAAA,aAAkB,uBAAE,cAAF,EAAkBA,QAAlB,CAAlB;AAAA,KAAR,EAAP;AACD,CAFD;;AAIA,IAAMC,SAAS,SAATA,MAAS,GAAM;AACnB,SAAO;AACLxB,UAAM;AAAA,UAAGuB,QAAH,SAAGA,QAAH;AAAA,UAAsBhB,GAAtB,SAAaN,KAAb,CAAsBM,GAAtB;AAAA,aACJ,uBAAE,MAAF,EAAU,CACR,uBAAED,gBAAF,EAAU,EAAEC,QAAF,EAAV,CADQ,EAER,uBAAEe,IAAF,EAAQ,EAAEf,QAAF,EAAR,EAAiBgB,QAAjB,CAFQ,EAGR,uBAAEF,iBAAF,EAAW,EAAEd,QAAF,EAAX,CAHQ,CAAV,CADI;AAAA;AADD,GAAP;AAQD,CATD;;AAWA,IAAMkB,SAAS,SAATA,MAAS,CAAClB,GAAD,EAAS;AACtB,SAAO;AACL,cAAU;AACRmB,cAAQ;AAAA,eAAM,uBAAEF,MAAF,EAAU,EAAEjB,QAAF,EAAV,EAAmB,uBAAEoB,eAAF,EAAS,EAAEpB,QAAF,EAAOqB,KAAKC,KAAKC,GAAL,EAAZ,EAAT,CAAnB,CAAN;AAAA;AADA,KADL;AAIL,cAAU;AACRC,eAAS,iBAACC,CAAD,EAAIC,CAAJ,EAAOC,CAAP,EAAa;AACpB,YAAI3B,IAAII,QAAJ,GAAewB,MAAf,IAAyB,CAA7B,EAAgC,OAAO3B,kBAAEC,KAAF,CAAQM,GAAR,CAAY,QAAZ,CAAP;AACjC,OAHO;AAIRW,cAAQ;AAAA,eAAM,uBAAEF,MAAF,EAAU,EAAEjB,QAAF,EAAV,EAAmB,uBAAE6B,iBAAF,EAAW,EAAE7B,QAAF,EAAX,CAAnB,CAAN;AAAA;AAJA;AAJL,GAAP;AAWD,CAZD;;AAcA8B,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,MAAMC,OAAOF,SAASG,IAAtB;AACAhC,oBAAEC,KAAF,CAAQ8B,IAAR,EAAc,QAAd,EAAwBd,OAAOgB,eAAP,CAAxB;AACD,CAHD;;;;;;;;;;;ACpCA;;;;;;;;;;AAEO,IAAMrB,oBAAM,SAANA,GAAM,CAACZ,CAAD;AAAA,SAAO,UAACkC,CAAD,EAAO;AAC/BvB,YAAQC,GAAR,CAAYZ,CAAZ,EAAekC,CAAf;AACA,WAAOA,CAAP;AACD,GAHkB;AAAA,CAAZ;;AAKP,IAAMC,OAAO,SAAPA,IAAO,CAACC,GAAD,EAAMC,GAAN;AAAA,SAAcC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,MAAiBH,MAAMD,GAAvB,IAA8BA,GAAzC,CAAd;AAAA,CAAb;AACO,IAAMK,sBAAO,SAAPA,IAAO,CAACC,EAAD;AAAA,SAAQA,GAAGA,GAAGf,MAAH,GAAY,CAAf,CAAR;AAAA,CAAb;AACA,IAAMgB,sBAAO;AAAA;AAAA,MAAEC,IAAF;AAAA,MAAWD,IAAX;;AAAA,SAAqBA,IAArB;AAAA,CAAb;;AAEA,IAAME,oCAAc,SAAdA,WAAc,CAAC9C,GAAD;AAAA,SAAU;AACnC+C,OAAGX,KAAK,CAAL,EAAQpC,IAAIgD,KAAZ,CADgC;AAEnCC,OAAGb,KAAK,CAAL,EAAQpC,IAAIkD,MAAZ;AAFgC,GAAV;AAAA,CAApB;AAIA,IAAMC,oCAAc,SAAdA,WAAc;AAAA,SAAMf,KAAK,CAAL,EAAQ,GAAR,CAAN;AAAA,CAApB;AACA,IAAMgB,8BAAW,SAAXA,QAAW,CAACpD,GAAD;AAAA,SAASoC,KAAK,CAAL,EAAQpC,IAAIgD,KAAZ,CAAT;AAAA,CAAjB;AACA,IAAMK,gCAAY,SAAZA,SAAY,CAACrD,GAAD;AAAA,SAASoC,KAAK,CAAL,EAAQpC,IAAIkD,MAAZ,CAAT;AAAA,CAAlB;AACA,IAAMI,0BAAS,SAATA,MAAS;AAAA,SAAMlB,KAAK,CAAL,EAAQ,GAAR,CAAN;AAAA,CAAf;AACA,IAAMmB,wBAAQ,SAARA,KAAQ,CAACC,IAAD;AAAA,sCAAcC,MAAMD,IAAN,EAAYE,IAAZ,EAAd;AAAA,CAAd;;AAEA,IAAMpD,4BAAU,SAAVA,OAAU,CAACqC,EAAD;AAAA,SAAQA,GAAGf,MAAH,IAAa,CAArB;AAAA,CAAhB;;AAEP,IAAM+B,UAAU,SAAVA,OAAU,CAAC3D,GAAD,EAAM4D,GAAN,EAAc;AAC5B,MAAIC,QAAQ,EAAEC,IAAI9D,IAAII,QAAJ,GAAewB,MAArB,EAA6BgC,QAA7B,EAAZ;AACA5D,MAAII,QAAJ,CAAaC,GAAb,CAAiB,UAACsC,EAAD;AAAA,WAAQA,GAAGoB,IAAH,CAAQF,KAAR,CAAR;AAAA,GAAjB;AACD,CAHD;;AAKA,IAAMG,SAAS,CAAC,QAAD,EAAW,QAAX,EAAqB,UAArB,CAAf;;AAEA,IAAM9B,QAAQ;AACZ+B,SAAO,6BAAO7B,KAAK,EAAL,EAAS,EAAT,CAAP,CADK;AAEZ7B,iBAAe,6BAAO,IAAP,CAFH;AAGZyD,gBAHY;AAIZhB,SAAO,GAJK;AAKZE,UAAQ,GALI;AAMZ9C,YAAU,6BAAO,EAAP,CANE;AAOZ8D,UAAQ,IAPI;AAQZP,kBARY;AASZ9C,UATY;AAUZH,eAAa;AAVD,CAAd;kBAYewB,K;;;;;;;;;;AC1Cf;;;;;;AAEA,IAAMiC,SAAS,SAATA,MAAS,GAAM;AACnB,SAAO;AACLC,cAAU,wBAAkC;AAAA,UAA/BC,GAA+B,QAA/BA,GAA+B;AAAA,4BAA1B3E,KAA0B;AAAA,UAAjB4E,GAAiB,cAAjBA,GAAiB;AAAA,UAAZtE,GAAY,cAAZA,GAAY;;AAC1C,UAAIuE,SAASF,IAAIG,UAAJ,CAAe,IAAf,CAAb;AACAF,aAAOC,OAAOE,YAAP,CAAoBH,GAApB,EAAyB,CAAzB,EAA4B,CAA5B,CAAP;AACD,KAJI;AAKL7E,UAAM;AAAA,8BAAGC,KAAH;AAAA,UAAYC,SAAZ,eAAYA,SAAZ;AAAA,UAAuBmE,EAAvB,eAAuBA,EAAvB;AAAA,aAAkC,mCAAYnE,SAAZ,EAAyB,EAAEmE,MAAF,EAAzB,CAAlC;AAAA;AALD,GAAP;AAOD,CARD;;kBAUeK,M;;;;;;;;;;ACZf;;;;AACA;;;;AACA;;;;;;AAEA,IAAM/C,QAAQ,SAARA,KAAQ,GAAM;AAClB,SAAO;AACLsD,YAAQ,sBAAwB;AAAA,UAAZ1E,GAAY,QAArBN,KAAqB,CAAZM,GAAY;;AAC9B,UAAIA,IAAIO,aAAJ,EAAJ,EAAyB;AACvB,YAAI8D,MAAMvC,SAAS6C,aAAT,CAAuB,QAAvB,CAAV;AACA,YAAIL,MAAMD,IAAIG,UAAJ,CAAe,IAAf,CAAV;AACAF,YAAIM,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,GAApB,EAAyB,GAAzB;AACA,6BAAM,EAAEN,QAAF,EAAOtE,QAAP,EAAN;AACA,YAAI6D,QAAQS,IAAIO,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB7E,IAAIgD,KAA3B,EAAkChD,IAAIkD,MAAtC,CAAZ;AACAlD,YAAIkE,MAAJ,GAAaL,KAAb;AACA7D,YAAI2D,OAAJ,CAAY3D,GAAZ,EAAiB6D,KAAjB;AACD;AACF,KAXI;AAYLpE,UAAM;AAAA,UAAYO,GAAZ,SAAGN,KAAH,CAAYM,GAAZ;AAAA,aACJ,uBACE,QADF,EAEE,uBAAEmE,gBAAF,EAAU;AACRL,YAAI,QADI;AAER9D,gBAFQ;AAGRL,mBAAWK,IAAIU,WAHP;AAIR4D,aAAKtE,IAAIkE;AAJD,OAAV,CAFF,CADI;AAAA;AAZD,GAAP;AAuBD,CAxBD;;kBA0Be9C,K;;;;;;;;;;AC9Bf;;;;AACA;;;;;;AAEA,IAAMS,UAAU,SAAVA,OAAU,GAAM;AACpB,SAAO;AACLpC,UAAM,oBAAwB;AAAA,UAAZO,GAAY,QAArBN,KAAqB,CAAZM,GAAY;;AAC5B,aAAO,uBACL,UADK,EAELA,IACGI,QADH,GAEGC,GAFH,CAEO;AAAA,YAAGuD,GAAH,SAAGA,GAAH;AAAA,eAAa,uBAAEO,gBAAF,EAAU,EAAEnE,QAAF,EAAOsE,KAAKV,GAAZ,EAAiBjE,WAAW,QAA5B,EAAV,CAAb;AAAA,OAFP,CAFK,CAAP;AAMD;AARI,GAAP;AAUD,CAXD;;kBAaekC,O;;;;;;;;;;AChBf;;AASA,IAAMiD,OAAO,SAAPA,IAAO,CAACC,CAAD,EAAIC,CAAJ,EAAOC,CAAP,EAAUxD,CAAV;AAAA,mBAAwBsD,CAAxB,UAA8BC,CAA9B,UAAoCC,CAApC,UAA0CxD,CAA1C;AAAA,CAAb;;AAEA,IAAMyD,aAAa,SAAbA,UAAa,CAACZ,GAAD,EAAMa,QAAN,EAAgBC,QAAhB,EAA0BpC,KAA1B,EAAiCE,MAAjC,EAAyCmC,GAAzC,EAAiD;AAClE;AACA,MAAMC,QAAQR,KAAKO,GAAL,EAAU,MAAV,EAAkB,KAAlB,EAAyB,IAAzB,CAAd;AACAf,MAAIiB,IAAJ;AACAjB,MAAIkB,SAAJ,GAAgBF,KAAhB;AACAhB,MAAImB,SAAJ,CAAcN,SAASpC,CAAvB,EAA0BoC,SAASlC,CAAnC;AACAqB,MAAIoB,MAAJ,CAAWN,QAAX;AACAd,MAAIqB,QAAJ,CAAa,CAAC3C,KAAD,GAAS,CAAtB,EAAyB,CAACE,MAAD,GAAU,CAAnC,EAAsCF,KAAtC,EAA6CE,MAA7C;AACAoB,MAAIsB,OAAJ;AACD,CATD;;AAWA,IAAMC,eAAe,SAAfA,YAAe,CAACvB,GAAD,EAAMa,QAAN,EAAgBC,QAAhB,EAA0BpC,KAA1B,EAAiCE,MAAjC,EAAyCmC,GAAzC,EAAiD;AACpE;AACA,MAAMC,QAAQR,KAAKO,GAAL,EAAU,MAAV,EAAkB,KAAlB,EAAyB,IAAzB,CAAd;;AAEAf,MAAIiB,IAAJ;AACAjB,MAAIkB,SAAJ,GAAgBF,KAAhB;AACAhB,MAAImB,SAAJ,CAAcN,SAASpC,CAAvB,EAA0BoC,SAASlC,CAAnC;AACAqB,MAAIoB,MAAJ,CAAWN,QAAX;;AAEAd,MAAIwB,SAAJ;AACAxB,MAAIyB,MAAJ,CAAW/C,KAAX,EAAkB,CAAlB;AACAsB,MAAI0B,MAAJ,CAAW,CAAX,EAAc,CAAChD,KAAD,GAAS,CAAvB;AACAsB,MAAI0B,MAAJ,CAAW,CAAX,EAAchD,QAAQ,CAAtB;AACAsB,MAAI2B,SAAJ;;AAEA3B,MAAI4B,IAAJ;AACA5B,MAAIsB,OAAJ;AACD,CAjBD;;AAmBA,IAAMO,YAAY,SAAZA,SAAY,CAAC7B,GAAD,EAAMtE,GAAN;AAAA,SAAc,UAACoG,KAAD,EAAW;AACzC,QAAIA,SAAS,UAAb,EACE,OAAOP,aACLvB,GADK,EAEL,wBAAYtE,GAAZ,CAFK,EAGL,yBAHK,EAIL,qBAASA,GAAT,CAJK,EAKL,sBAAUA,GAAV,CALK,EAML,oBANK,CAAP;AAQF,QAAIoG,SAAS,QAAb,EACE,OAAOlB,WACLZ,GADK,EAEL,wBAAYtE,GAAZ,CAFK,EAGL,yBAHK,EAIL,qBAASA,GAAT,CAJK,EAKL,sBAAUA,GAAV,CALK,EAML,oBANK,CAAP;AAQH,GAnBiB;AAAA,CAAlB;;AAqBA,IAAMqG,WAAW,SAAXA,QAAW,CAACrG,GAAD;AAAA,SACfA,IAAIgE,MAAJ,CAAWzB,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgBzC,IAAIgE,MAAJ,CAAWpC,MAAtC,CAAX,CADe;AAAA,CAAjB;;AAGA,IAAM0E,QAAQ,SAARA,KAAQ;AAAA,MAAGhC,GAAH,QAAGA,GAAH;AAAA,MAAQtE,GAAR,QAAQA,GAAR;AAAA,SACZ,kBAAMA,IAAIiE,KAAJ,EAAN,EACG5D,GADH,CACO,UAACkG,CAAD;AAAA,WAAOF,SAASrG,GAAT,CAAP;AAAA,GADP,EAEGK,GAFH,CAEO8F,UAAU7B,GAAV,EAAetE,GAAf,CAFP,CADY;AAAA,CAAd;;kBAKesG,K","file":"public/app.js","sourcesContent":["import m from \"mithril\"\n\nconst Button = () => {\n  return {\n    view: ({ attrs: { classList, action, label } }) =>\n      m(`button.btn.${classList}`, { onclick: action }, label)\n  }\n}\n\nexport default Button\n","import m from \"mithril\"\nimport Button from \"./button.js\"\nimport { isEmpty } from \"../model\"\n\nconst Navbar = () => {\n  return {\n    view: ({ attrs: { mdl } }) => {\n      return m(\n        \"nav.navbar\",\n        m.route.get() == \"/easel\"\n          ? mdl.artworks.map(isEmpty) &&\n              m(Button, {\n                mdl,\n                classList: \"navBtn\",\n                action: () => {\n                  mdl.preventUpdate(false)\n                  m.route.set(\"/print\")\n                },\n                label: \"View Gallery\"\n              })\n          : m(Button, {\n              mdl,\n              classList: \"navBtn\",\n              action: () => {\n                mdl.preventUpdate(true)\n                m.route.set(\"/easel\")\n              },\n              label: \"Commision New Painting\"\n            })\n      )\n    }\n  }\n}\n\nexport default Navbar\n","import m from \"mithril\"\nimport Button from \"./button.js\"\n\nconst EaselTools = () => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \"aside.navbar\",\n        m(Button, {\n          mdl,\n          classList: \"toolBtn\",\n          action: () => {\n            mdl.preventUpdate(true)\n            m.route.set(\"/easel\")\n          },\n          label: \"New Painting\"\n        }),\n        m(Button, {\n          mdl,\n          classList: \"toolBtn\",\n          action: () => {\n            mdl.preventUpdate(false)\n            mdl.orientation == \"portrait\"\n              ? (mdl.orientation = \"landscape\")\n              : (mdl.orientation = \"portrait\")\n          },\n          label: mdl.orientation == \"portrait\" ? \"landscape\" : \"portrait\"\n        })\n      )\n  }\n}\n\nconst PrintTools = () => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m(\"aside.navbar\", [\n        m(Button, {\n          mdl,\n          classList: \"toolBtn\",\n          action: () => console.log(\"download\", mdl),\n          label: \"Download\"\n        }),\n        m(Button, {\n          mdl,\n          classList: \"toolBtn\",\n          action: () => console.log(\"email\", mdl),\n          label: \"Email\"\n        })\n      ])\n  }\n}\n\nconst Toolbar = () => {\n  return {\n    view: ({ attrs: { mdl } }) =>\n      m.route.get() == \"/easel\"\n        ? m(EaselTools, { mdl })\n        : m(PrintTools, { mdl })\n  }\n}\n\nexport default Toolbar\n","import m from \"mithril\"\nimport Model, { isEmpty } from \"./model.js\"\nimport Navbar from \"./components/navbar\"\nimport Toolbar from \"./components/toolbar\"\nimport Easel from \"./pages/easel.js\"\nimport Gallery from \"./pages/gallery.js\"\n\nconst Main = () => {\n  return { view: ({ children }) => m(\"section.main\", children) }\n}\n\nconst Layout = () => {\n  return {\n    view: ({ children, attrs: { mdl } }) =>\n      m(\".app\", [\n        m(Navbar, { mdl }),\n        m(Main, { mdl }, children),\n        m(Toolbar, { mdl })\n      ])\n  }\n}\n\nconst routes = (mdl) => {\n  return {\n    \"/easel\": {\n      render: () => m(Layout, { mdl }, m(Easel, { mdl, key: Date.now() }))\n    },\n    \"/print\": {\n      onmatch: (a, b, c) => {\n        if (mdl.artworks().length == 0) return m.route.set(\"/easel\")\n      },\n      render: () => m(Layout, { mdl }, m(Gallery, { mdl }))\n    }\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const root = document.body\n  m.route(root, \"/print\", routes(Model))\n})\n","import Stream from \"mithril-stream\"\n\nexport const log = (m) => (v) => {\n  console.log(m, v)\n  return v\n}\n\nconst rand = (min, max) => Math.floor(Math.random() * (max - min) + min)\nexport const last = (xs) => xs[xs.length - 1]\nexport const rest = ([head, ...rest]) => rest\n\nexport const getPosition = (mdl) => ({\n  x: rand(0, mdl.width),\n  y: rand(0, mdl.height)\n})\nexport const getRotation = () => rand(0, 360)\nexport const getWidth = (mdl) => rand(0, mdl.width)\nexport const getHeight = (mdl) => rand(0, mdl.height)\nexport const getHue = () => rand(0, 999)\nexport const range = (size) => [...Array(size).keys()]\n\nexport const isEmpty = (xs) => xs.length == 0\n\nconst saveArt = (mdl, art) => {\n  let image = { id: mdl.artworks().length, art }\n  mdl.artworks.map((xs) => xs.push(image))\n}\n\nconst shapes = [\"circle\", \"square\", \"triangle\"]\n\nconst Model = {\n  count: Stream(rand(30, 70)),\n  preventUpdate: Stream(true),\n  shapes,\n  width: 600,\n  height: 600,\n  artworks: Stream([]),\n  canvas: null,\n  saveArt,\n  log,\n  orientation: \"portrait\"\n}\nexport default Model\n","import m from \"mithril\"\n\nconst Canvas = () => {\n  return {\n    oncreate: ({ dom, attrs: { ctx, mdl } }) => {\n      let newCtx = dom.getContext(\"2d\")\n      ctx && newCtx.putImageData(ctx, 0, 0)\n    },\n    view: ({ attrs: { classList, id } }) => m(`canvas.${classList}`, { id })\n  }\n}\n\nexport default Canvas\n","import m from \"mithril\"\nimport Canvas from \"./canvas.js\"\nimport Paint from \"./paint.js\"\n\nconst Easel = () => {\n  return {\n    oninit: ({ attrs: { mdl } }) => {\n      if (mdl.preventUpdate()) {\n        let dom = document.createElement(\"canvas\")\n        let ctx = dom.getContext(\"2d\")\n        ctx.clearRect(0, 0, 600, 600)\n        Paint({ ctx, mdl })\n        let image = ctx.getImageData(0, 0, mdl.width, mdl.height)\n        mdl.canvas = image\n        mdl.saveArt(mdl, image)\n      }\n    },\n    view: ({ attrs: { mdl } }) =>\n      m(\n        \".easel\",\n        m(Canvas, {\n          id: \"canvas\",\n          mdl,\n          classList: mdl.orientation,\n          ctx: mdl.canvas\n        })\n      )\n  }\n}\n\nexport default Easel\n","import m from \"mithril\"\nimport Canvas from \"./canvas\"\n\nconst Gallery = () => {\n  return {\n    view: ({ attrs: { mdl } }) => {\n      return m(\n        \".gallery\",\n        mdl\n          .artworks()\n          .map(({ art }) => m(Canvas, { mdl, ctx: art, classList: \"canvas\" }))\n      )\n    }\n  }\n}\n\nexport default Gallery\n","import {\n  range,\n  getPosition,\n  getRotation,\n  getWidth,\n  getHeight,\n  getHue\n} from \"../model\"\n\nconst hsla = (h, s, l, a) => `hsla(${h}, ${s}, ${l}, ${a})`\n\nconst drawSquare = (ctx, position, rotation, width, height, hue) => {\n  // console.log(\"square\", position, rotation, width, height)\n  const color = hsla(hue, \"100%\", \"50%\", 0.75)\n  ctx.save()\n  ctx.fillStyle = color\n  ctx.translate(position.x, position.y)\n  ctx.rotate(rotation)\n  ctx.fillRect(-width / 2, -height / 2, width, height)\n  ctx.restore()\n}\n\nconst drawTriangle = (ctx, position, rotation, width, height, hue) => {\n  // console.log(\"triangle\", position, rotation, width, height)\n  const color = hsla(hue, \"100%\", \"50%\", 0.75)\n\n  ctx.save()\n  ctx.fillStyle = color\n  ctx.translate(position.x, position.y)\n  ctx.rotate(rotation)\n\n  ctx.beginPath()\n  ctx.moveTo(width, 0)\n  ctx.lineTo(0, -width / 4)\n  ctx.lineTo(0, width / 4)\n  ctx.closePath()\n\n  ctx.fill()\n  ctx.restore()\n}\n\nconst createArt = (ctx, mdl) => (shape) => {\n  if (shape == \"triangle\")\n    return drawTriangle(\n      ctx,\n      getPosition(mdl),\n      getRotation(),\n      getWidth(mdl),\n      getHeight(mdl),\n      getHue()\n    )\n  if (shape == \"square\")\n    return drawSquare(\n      ctx,\n      getPosition(mdl),\n      getRotation(),\n      getWidth(mdl),\n      getHeight(mdl),\n      getHue()\n    )\n}\n\nconst getShape = (mdl) =>\n  mdl.shapes[Math.floor(Math.random() * mdl.shapes.length)]\n\nconst Paint = ({ ctx, mdl }) =>\n  range(mdl.count())\n    .map((_) => getShape(mdl))\n    .map(createArt(ctx, mdl))\n\nexport default Paint\n"]}